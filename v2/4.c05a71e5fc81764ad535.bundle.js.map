{"version":3,"sources":["webpack:///./src/components/CreateKontokorrent/CreateKontokorrent.html","webpack:///./src/components/PersonenListe/PersonenListe.html","webpack:///./src/components/PersonenListe/PersonenListenEintrag.html","webpack:///./src/components/PersonenListe/PersonenListenEintrag.ts","webpack:///./src/components/PersonenListe/PersonenListe.ts","webpack:///./src/components/CreateKontokorrent/CreateKontokorrent.ts"],"names":["module","exports","HTMLElement","super","this","innerHTML","removeButton","querySelector","nameInput","addEventListener","dispatchEvent","Event","CustomEvent","value","customElements","define","names","personenListe","querySelectorAll","forEach","v","push","name","addPersonButton","li","document","createElement","e","appendChild","removeChild","kontokorrentId","oeffentlicherNameManuell","serviceLocator","store","routingActionCreator","accountActionCreator","kontokorrentsActionCreator","emptyNameError","eventCreateError","personCountError","eventNameError","createButton","eventName","creating","oeffentlicherName","oeffentlich","oeffentlichBox","oeffentlicherNameError","eventNameDuplicate","accountCreationFailed","personNameDuplicateError","createEvent","bind","style","display","checked","subscription","subscribe","state","applyStoreState","personNames","personen","personCountOk","length","personNameError","some","test","item","index","indexOf","ensureAccount","kontokorrentErstellen","navigateKontokorrent","kontokorrents","account","accountCreating","creationFailed","exists"],"mappings":"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","file":"4.c05a71e5fc81764ad535.bundle.js","sourcesContent":["// Module\nvar code = \"<h1>Event erstellen</h1> <label for=event-name>Eventname</label> <input type=text id=event-name name=event-name> <label for=event-name>Oeffentlich</label> <input type=checkbox id=oeffentlich name=oeffentlich checked=checked> <div id=oeffentlich-box> <label for=oeffentlicher-name>Öffentlicher Name</label> <input type=text id=oeffentlicher-name name=oeffentlicher-name> </div> <div id=empty-name-error style=display:none>Für alle Personen Namen angeben</div> <div id=person-count-error style=display:none>Mindestens zwei Personen angeben</div> <div id=event-create-error style=display:none>Kontokorrent konnte nicht erstellt werden</div> <div id=event-name-duplicate style=display:none>Ein Kontokorrent mit diesem Namen exisitert bereits</div> <div id=event-name-error style=display:none>Eventname angeben</div> <div id=oeffentlicher-name-error style=display:none>Öfferntlicher Name: Nur Kleinbuchstaben und Zahlen</div> <div id=person-name-duplicate-error style=display:none>Personennamen müssen unterschiedlich sein</div> <div id=creating style=display:none>Wird erstellt</div> <div id=account-creation-failed style=display:none>Account konnte nicht erstellt werden</div> <app-personen-liste id=personen-liste></app-personen-liste> <button id=create-button>Erstellen</button>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul id=personen-liste class=\\\"mdc-list mdc-list--non-interactive\\\"> </ul> <button type=button id=add-person>Person hinzufügen</button>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<input type=text id=name placehoder=Name /> <button id=remove>entfernen</button>\";\n// Exports\nmodule.exports = code;","import template from \"./PersonenListenEintrag.html\";\r\n\r\nexport class PersonenListenEintrag extends HTMLElement {\r\n    private removeButton: HTMLButtonElement;\r\n    private nameInput: HTMLInputElement;\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n    }\r\n\r\n    connectedCallback() {\r\n        let element = this;\r\n        this.removeButton = element.querySelector(\"#remove\");\r\n        this.nameInput = element.querySelector(\"#name\");\r\n        this.nameInput.addEventListener(\"change\", () => {\r\n            this.dispatchEvent(new Event(\"change\"));\r\n        });\r\n        this.removeButton.addEventListener(\"click\", () => {\r\n            this.dispatchEvent(new CustomEvent(\"onremove\"));\r\n        })\r\n    }\r\n\r\n    get name(){\r\n        return this.nameInput.value;\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n}\r\nexport const PersonenListenEintragTagName = 'app-personen-listen-eintrag'; \r\ncustomElements.define(PersonenListenEintragTagName, PersonenListenEintrag);\r\n","import template from \"./PersonenListe.html\";\r\nimport { PersonenListenEintrag, PersonenListenEintragTagName } from \"./PersonenListenEintrag\";\r\n\r\nexport class PersonenListe extends HTMLElement {\r\n    private addPersonButton: HTMLButtonElement;\r\n    private personenListe: HTMLUListElement;\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n    }\r\n\r\n    get personen() {\r\n        let names: string[] = [];\r\n        this.personenListe.querySelectorAll(PersonenListenEintragTagName).forEach((v: PersonenListenEintrag) => names.push(v.name));\r\n        return names;\r\n    }\r\n\r\n    connectedCallback() {\r\n        let element = this;\r\n        this.addPersonButton = element.querySelector(\"#add-person\");\r\n        this.personenListe = element.querySelector(\"#personen-liste\");\r\n        this.addPersonButton.addEventListener(\"click\", () => {\r\n            let li = document.createElement(\"li\");\r\n            let e = new PersonenListenEintrag();\r\n            li.appendChild(e);\r\n            this.personenListe.appendChild(li);\r\n            e.addEventListener(\"onremove\", () => {\r\n                this.personenListe.removeChild(li);\r\n            });\r\n        });\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n}\r\n\r\ncustomElements.define('app-personen-liste', PersonenListe);\r\n","import template from \"./CreateKontokorrent.html\";\r\nimport { Store } from \"../../state/Store\";\r\nimport { ServiceLocator } from \"../../ServiceLocator\";\r\nimport { RoutingActionCreator } from \"../../state/actions/RoutingActionCreator\";\r\nimport { State } from \"../../state/State\";\r\nimport { AccountActionCreator } from \"../../state/actions/AccountActionCreator\";\r\nimport \"../PersonenListe/PersonenListe\";\r\nimport { PersonenListe } from \"../PersonenListe/PersonenListe\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { KontokorrentsActionCreator } from \"../../state/actions/KontokorrentsActionCreator\";\r\n\r\nexport class CreateKontokorrent extends HTMLElement {\r\n    store: Store;\r\n    subscription: () => void;\r\n    routingActionCreator: RoutingActionCreator;\r\n    private accountActionCreator: AccountActionCreator;\r\n\r\n\r\n    private personenListe: PersonenListe;\r\n    private emptyNameError: HTMLDivElement;\r\n    private eventCreateError: HTMLDivElement;\r\n    private personCountError: HTMLDivElement;\r\n    private eventNameError: HTMLDivElement;\r\n    private createButton: HTMLButtonElement;\r\n    private eventName: HTMLInputElement;\r\n    private readonly kontokorrentId: string;\r\n    private creating: HTMLDivElement;\r\n    private oeffentlicherName: HTMLInputElement;\r\n    private oeffentlich: HTMLInputElement;\r\n    private oeffentlichBox: HTMLDivElement;\r\n    private oeffentlicherNameManuell: boolean;\r\n    private oeffentlicherNameError: HTMLDivElement;\r\n    private eventNameDuplicate: HTMLDivElement;\r\n    private kontokorrentsActionCreator: KontokorrentsActionCreator;\r\n    private accountCreationFailed: HTMLDivElement;\r\n    private personNameDuplicateError: HTMLDivElement;\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.kontokorrentId = uuid();\r\n        this.oeffentlicherNameManuell = false;\r\n    }\r\n\r\n    addServices(serviceLocator: ServiceLocator) {\r\n        this.store = serviceLocator.store;\r\n        this.routingActionCreator = serviceLocator.routingActionCreator;\r\n        this.accountActionCreator = serviceLocator.accountActionCreator;\r\n        this.kontokorrentsActionCreator = serviceLocator.kontokorrentsActionCreator;\r\n    }\r\n\r\n    connectedCallback() {\r\n        let element = this;\r\n        this.personenListe = element.querySelector(\"#personen-liste\");\r\n        this.emptyNameError = element.querySelector(\"#empty-name-error\");\r\n        this.eventCreateError = element.querySelector(\"#event-create-error\");\r\n        this.personCountError = element.querySelector(\"#person-count-error\");\r\n        this.eventNameError = element.querySelector(\"#event-name-error\");\r\n        this.createButton = element.querySelector(\"#create-button\");\r\n        this.eventName = element.querySelector(\"#event-name\");\r\n        this.creating = element.querySelector(\"#creating\");\r\n        this.oeffentlicherName = element.querySelector(\"#oeffentlicher-name\");\r\n        this.oeffentlich = element.querySelector(\"#oeffentlich\");\r\n        this.oeffentlichBox = element.querySelector(\"#oeffentlich-box\");\r\n        this.oeffentlicherNameError = element.querySelector(\"#oeffentlicher-name-error\");\r\n        this.eventNameDuplicate = element.querySelector(\"#event-name-duplicate\");\r\n        this.accountCreationFailed = element.querySelector(\"#account-creation-failed\");\r\n        this.personNameDuplicateError = element.querySelector(\"#person-name-duplicate-error\");\r\n\r\n\r\n        this.createButton.addEventListener(\"click\", this.createEvent.bind(this));\r\n\r\n        this.oeffentlich.addEventListener(\"change\", () => {\r\n            this.oeffentlichBox.style.display = this.oeffentlich.checked ? \"block\" : \"none\";\r\n        });\r\n\r\n        this.eventName.addEventListener(\"change\", () => {\r\n            if (!this.oeffentlicherNameManuell) {\r\n                this.oeffentlicherName.value = this.eventName.value;\r\n            }\r\n        });\r\n\r\n        this.oeffentlicherName.addEventListener(\"change\", () => {\r\n            this.oeffentlicherNameManuell = true;\r\n        });\r\n\r\n        this.subscription = this.store.subscribe(null, state => this.applyStoreState(state));\r\n        this.applyStoreState(this.store.state);\r\n    }\r\n\r\n    async createEvent() {\r\n        let eventName = this.eventName.value;\r\n        let personNames = this.personenListe.personen;\r\n        this.eventNameError.style.display = eventName ? \"none\" : \"block\";\r\n        let personCountOk = personNames.length >= 2;\r\n        this.personCountError.style.display = personCountOk ? \"none\" : \"block\";\r\n        let personNameError = personNames.some(v => !v);\r\n        this.emptyNameError.style.display = personNameError ? \"block\" : \"none\";\r\n        let oeffentlicherNameError = this.oeffentlich.checked && ( !this.oeffentlicherName.value || !/^[a-z0-9]+$/.test(this.oeffentlicherName.value));\r\n        this.oeffentlicherNameError.style.display = oeffentlicherNameError ? \"block\" : \"none\";\r\n        let personNameDuplicateError = (personNames.some((item, index) => personNames.indexOf(item) != index));\r\n        this.personNameDuplicateError.style.display = personNameDuplicateError ? \"block\" : \"none\";\r\n        if (eventName && personCountOk && !personNameError && !oeffentlicherNameError && !personNameDuplicateError) {\r\n            if (await this.accountActionCreator.ensureAccount()) {\r\n                if (await this.kontokorrentsActionCreator.kontokorrentErstellen(this.kontokorrentId, this.eventName.value, this.oeffentlich.checked ? this.oeffentlicherName.value : null, personNames)) {\r\n                    this.routingActionCreator.navigateKontokorrent(this.kontokorrentId);\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    private applyStoreState(state: State) {\r\n        this.creating.style.display = state.kontokorrents.creating || state.account.accountCreating ? \"block\" : \"none\";\r\n        this.eventCreateError.style.display = state.kontokorrents.creationFailed ? \"block\" : \"none\";\r\n        this.eventNameDuplicate.style.display = state.kontokorrents.creationFailed && state.kontokorrents.creationFailed.exists ? \"block\" : \"none\";\r\n        this.accountCreationFailed.style.display = !state.account.accountCreating && state.account.accountCreationFailed ?\r\n            \"block\" : \"none\";\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        this.subscription();\r\n    }\r\n}\r\n\r\ncustomElements.define('app-create-event', CreateKontokorrent);"],"sourceRoot":""}