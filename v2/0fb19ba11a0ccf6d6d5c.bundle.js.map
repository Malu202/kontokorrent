{"version":3,"file":"0fb19ba11a0ccf6d6d5c.bundle.js","mappings":"yKACA,I,oBCCM,MAAOA,UAA8BC,YAKvCC,cACIC,QAHI,KAAAC,UAAW,EAMnBC,oBACSC,KAAKF,WACNE,KAAKC,UCZN,wJDaCD,KAAKF,UAAW,EAChBE,KAAKE,aAAeF,KAAKG,cAAc,WACvCH,KAAKI,UAAYJ,KAAKG,cAAc,UAExCH,KAAKI,UAAUC,iBAAiB,UAAU,KACtCL,KAAKM,cAAc,IAAIC,MAAM,cAEjCP,KAAKE,aAAaG,iBAAiB,SAAS,KACxCL,KAAKM,cAAc,IAAIE,YAAY,gBAInC,WACJ,OAAOR,KAAKI,UAAUK,MAG1BC,yBAKG,MAAMC,EAA+B,8BAC5CC,eAAeC,OAAOF,EAA8BjB,GEjC9C,MAAOoB,UAAsBnB,YAK/BC,cACIC,QAHI,KAAAC,UAAW,EAMP,eACR,IAAIiB,EAAkB,GAEtB,OADAf,KAAKgB,cAAcC,iBAAiBN,GAA8BO,SAASC,GAA6BJ,EAAMK,KAAKD,EAAEE,QAC9GN,EAGXhB,oBACSC,KAAKF,WACNE,KAAKC,UCnBN,wMDoBCD,KAAKsB,gBAAkBtB,KAAKG,cAAc,eAC1CH,KAAKgB,cAAgBhB,KAAKG,cAAc,mBACxCH,KAAKF,UAAW,GAEpBE,KAAKsB,gBAAgBjB,iBAAiB,SAAS,KAC3C,IAAIkB,EAAKC,SAASC,cAAc,MAC5BC,EAAI,IAAIhC,EACZ6B,EAAGI,YAAYD,GACf1B,KAAKgB,cAAcW,YAAYJ,GAC/BG,EAAEvB,cAAc,SAASyB,QACzBF,EAAErB,iBAAiB,YAAY,KAC3BL,KAAKgB,cAAca,YAAYN,SAK3Cb,yBAMJE,eAAeC,OAAO,qBAAsBC,G,2DE3BtC,MAAOgB,UAA2BnC,YAuBpCC,cACIC,QAJI,KAAAC,UAAW,EAKfE,KAAK+B,gBAAiB,SAG1BC,YAAYC,GACRjC,KAAKkC,MAAQD,EAAeC,MAC5BlC,KAAKmC,sBAAuB,OAA4BF,GACxDjC,KAAKoC,sBAAuB,QAA4BH,GACxDjC,KAAKqC,sCAAuC,QAA4CJ,GAG5FlC,oBACSC,KAAKF,WACNE,KAAKF,UAAW,EAChBE,KAAKC,ULrDN,6/DKsDCD,KAAKgB,cAAgBhB,KAAKG,cAAc,mBACxCH,KAAKsC,eAAiBtC,KAAKG,cAAc,qBACzCH,KAAKuC,iBAAmBvC,KAAKG,cAAc,uBAC3CH,KAAKwC,iBAAmBxC,KAAKG,cAAc,uBAC3CH,KAAKyC,uBAAyBzC,KAAKG,cAAc,8BACjDH,KAAK0C,eAAiB1C,KAAKG,cAAc,qBACzCH,KAAK2C,aAAe3C,KAAKG,cAAc,kBACvCH,KAAK4C,UAAY5C,KAAKG,cAAc,eACpCH,KAAK6C,SAAW7C,KAAKG,cAAc,aACnCH,KAAK8C,mBAAqB9C,KAAKG,cAAc,yBAC7CH,KAAK+C,sBAAwB/C,KAAKG,cAAc,4BAChDH,KAAKgD,yBAA2BhD,KAAKG,cAAc,iCAGvDH,KAAK2C,aAAatC,iBAAiB,QAASL,KAAKiD,YAAYC,KAAKlD,OAClEA,KAAKmD,aAAenD,KAAKkC,MAAMkB,UAAU,MAAMC,GAASrD,KAAKsD,gBAAgBD,KAC7ErD,KAAKsD,gBAAgBtD,KAAKkC,MAAMmB,QAChC,EAAAE,EAAA,GAAavD,KAAKiB,iBAAiB,KAAMjB,KAAKmC,sBAGzB,oBACrB,IAAIS,EAAY5C,KAAK4C,UAAUnC,MAC3B+C,EAAcxD,KAAKgB,cAAcyC,SACrCzD,KAAKyC,uBAAuBiB,MAAMC,QAAUf,EAAY,OAAS,QACjE,IAAIgB,EAAgBJ,EAAYK,QAAU,EAC1C7D,KAAKwC,iBAAiBkB,MAAMC,QAAUC,EAAgB,OAAS,QAC/D,IAAIE,EAAkBN,EAAYO,MAAK5C,IAAMA,IAC7CnB,KAAKsC,eAAeoB,MAAMC,QAAUG,EAAkB,QAAU,OAChE,IAAIE,GAAqBhE,KAAK4C,UAAUnC,OAAS,IAAIwD,cACjDC,EAAaF,IAAsB,cAAcG,KAAKH,GAC1DhE,KAAK0C,eAAegB,MAAMC,QAAUO,EAAY,QAAU,OAC1D,IAAIlB,EAA4BQ,EAAYO,MAAK,CAACK,EAAMC,IAAUb,EAAYc,QAAQF,IAASC,IAC/FrE,KAAKgD,yBAAyBU,MAAMC,QAAUX,EAA2B,QAAU,QAC/EJ,IAAagB,GAAkBE,GAAoBI,GAAclB,EAOjExB,SAAS+C,iBAAiBC,OAAO,CAAEC,IAAK,EAAGC,SAAU,iBAN3C1E,KAAKoC,qBAAqBuC,uBACtB3E,KAAKqC,qCAAqCuC,sBAAsB5E,KAAK+B,eAAgB/B,KAAK4C,UAAUnC,MAAOuD,EAAmBR,UAC9HxD,KAAKmC,qBAAqB0C,yBAAyB7E,KAAK+B,gBAQtEuB,gBAAgBD,GACpBrD,KAAK6C,SAASa,MAAMC,QAAUN,EAAMyB,cAAcjC,UAAYQ,EAAM0B,QAAQC,gBAAkB,OAAS,OACvGhF,KAAKuC,iBAAiBmB,MAAMC,QAAUN,EAAMyB,cAAcG,eAAiB,QAAU,OACrFjF,KAAK8C,mBAAmBY,MAAMC,QAAUN,EAAMyB,cAAcG,gBAAkB5B,EAAMyB,cAAcG,eAAeC,OAAS,QAAU,OACpIlF,KAAK+C,sBAAsBW,MAAMC,SAAWN,EAAM0B,QAAQC,iBAAmB3B,EAAM0B,QAAQhC,sBACvF,QAAU,OAGlBrC,uBACIV,KAAKmD,gBAIbvC,eAAeC,OAAO,mBAAoBiB,I,gBC9GpC,MAAOqD,UAAgBxF,YAEzBC,cACIC,QACiBG,KAAKoF,aAAa,CAAEC,KAAM,SAChCpF,UCNR,8gBDSPF,qBAIAW,yBAKJE,eAAeC,OAAO,cAAesE,I,qBEjB/B,SAAU5B,EAAa+B,EAAoEnD,GAC7FmD,EAASpE,SAASQ,IACdA,EAAErB,iBAAiB,SAASkF,IACxBA,EAAGC,iBACHrD,EAAqBsD,SAAS/D,EAAEgE,aAAa,e,sDCNnD,MAAOC,UAAchG,YAEvBC,cACIC,QAFI,KAAA+F,YAAsB,EAG1B5F,KAAK6F,YAAc7F,KAAK6F,YAAY3C,KAAKlD,MACzCA,KAAK8F,cAAgB9F,KAAK8F,cAAc5C,KAAKlD,MAGjDD,oBACIC,KAAK+F,eAGDF,YAAYN,GACF,UAAVA,EAAGS,KACHhG,KAAKiG,OAILH,cAAcP,GACbvF,KAAKkG,SAAmBC,MAAMC,SAC/BpG,KAAKiG,OAINA,OACCjG,KAAK4F,aACLpE,SAAS6E,oBAAoB,UAAWrG,KAAK6F,aAC7CrE,SAAS6E,oBAAoB,QAASrG,KAAK8F,eAC3C9F,KAAK4F,YAAa,EAClB5F,KAAK+F,gBAINO,OACEtG,KAAK4F,aACNpE,SAASnB,iBAAiB,UAAWL,KAAK6F,aAC1CrE,SAASnB,iBAAiB,QAASL,KAAK8F,eACxC9F,KAAK4F,YAAa,EAClB5F,KAAK+F,gBAILA,eACJ/F,KAAK0D,MAAMC,QAAU3D,KAAK4F,WAAa,QAAU,OAG9CW,SACEvG,KAAK4F,WAIN5F,KAAKiG,OAHLjG,KAAKsG,OAQb5F,uBACIV,KAAKiG,QAGbrF,eAAeC,OAAO,YAAa8E,I,qBC1D5B,MAAMa,EAAmB,WAE1B,MAAOC,UAAkB9G,YAE3BC,cACIC,QACAG,KAAK8F,cAAgB9F,KAAK8F,cAAc5C,KAAKlD,MAGjD0G,2BACI1G,KAAK2G,mBAGDA,mBACJ3G,KAAK4G,QAAU5G,KAAK0F,aAAac,GAIR,gCACzB,MAAO,CAACA,GAGZzG,oBACIC,KAAKK,iBAAiB,QAASL,KAAK8F,eAGhCA,cAAcP,GACC/D,SAASrB,cAAT,WAA2BH,KAAK4G,UAC7CL,SACNhB,EAAGsB,kBAIPnG,uBACIV,KAAKqG,oBAAoB,QAASrG,KAAK8F,gBAG/ClF,eAAeC,OAAO,aAAc4F,I,mEC7B9B,MAAOK,EAETlH,YAAmBsF,GAAA,KAAAA,OAAAA,EADV,KAAA6B,KAAI,GAMX,MAAOC,EAETpH,cADS,KAAAmH,KAAI,GAMX,MAAOE,EAETrH,YAAmBsH,GAAA,KAAAA,aAAAA,EADV,KAAAH,KAAI,IAMX,MAAOI,EAETvH,YAAmBwH,GAAA,KAAAA,SAAAA,EADV,KAAAL,KAAI,GAMX,MAAOM,EAETzH,cADS,KAAAmH,KAAI,IAMX,MAAOO,EAET1H,YAAmBkF,GAAA,KAAAA,cAAAA,EADV,KAAAiC,KAAI,IAMX,MAAOQ,EAET3H,cADS,KAAAmH,KAAI,IAMX,MAAOS,EAET5H,cADS,KAAAmH,KAAI,IAeX,MAAOU,EAET7H,YAAoBsC,EACRwF,EACAC,GAFQ,KAAAzF,MAAAA,EACR,KAAAwF,UAAAA,EACA,KAAAC,GAAAA,EAIZC,qBACI5H,KAAKkC,MAAM2F,SAAS,IAAIN,GAG5BO,6BACI9H,KAAKkC,MAAM2F,SAAS,IAAIL,GAGD,4BAACO,EAAY1G,EAAc2C,EAA2BP,GAC7E,IAAIuE,EAAoC,CACpC3G,KAAAA,EACA0G,GAAAA,EACA/D,kBAAAA,EACAP,SAAUA,EAASwE,KAAI9G,IAAc,CAAEE,KAAMF,EAAG4G,IAAI,cAExD/H,KAAKkC,MAAM2F,SAAS,IAAIb,GACxB,IAAIkB,QAAYlI,KAAK0H,UAAUS,kBAAkBH,GACjD,OAAKE,EAAIE,eAICpI,KAAK2H,GAAGU,gBAAgB,CAC1BN,GAAIA,EACJ1G,KAAMA,EACNoC,SAAUuE,EAAQvE,SAClBO,kBAAmBA,IAEvBhE,KAAKkC,MAAM2F,SAAS,IAAIZ,EAAoB,CACxCc,GAAIA,EACJ1G,KAAMA,EACNoC,SAAUuE,EAAQvE,SAClBO,kBAAmBA,MAEhB,IAfPhE,KAAKkC,MAAM2F,SAAS,IAAIf,EAA2BoB,EAAIhD,UAiBpD,GAGkB,8BAAClB,GAC1B,IAAIsE,QAAWtI,KAAK2H,GAAGY,sBAAsBvE,GAC7C,GAAI,MAAQsE,EACR,OAAOA,EAAGP,GAEd/H,KAAKkC,MAAM2F,SAAS,IAAIR,GACxB,IACI,IAAIa,QAAYlI,KAAK0H,UAAUc,wBAAwBxE,EAAmB,MAC1E,GAAI,MAAQkE,EAGP,CACD,IAAIO,QAAezI,KAAK2H,GAAGe,iBAAiBR,EAAID,KAAI9G,IACzC,CACH4G,GAAI5G,EAAE4G,GACN1G,KAAMF,EAAEE,KACRoC,SAAUtC,EAAEsC,SACZO,kBAAmB7C,EAAE6C,uBAI7B,OADAhE,KAAKkC,MAAM2F,SAAS,IAAIP,EAA+BY,IAChDO,EAAO,GAZdzI,KAAKkC,MAAM2F,SAAS,IAAIV,GAA8B,IAe9D,MAAOwB,GACH3I,KAAKkC,MAAM2F,SAAS,IAAIV,GAA8B,IAE1D,OAAO,GAIT,SAAUyB,EAA4C3G,GACxD,OAAOA,EAAe4G,IAAI,wCACtB5G,GAAkB,IAAIwF,EAClBxF,EAAeC,MACfD,EAAeyF,UACfzF,EAAe0F","sources":["webpack://kontokorrent/./src/components/CreateKontokorrent/CreateKontokorrent.html","webpack://kontokorrent/./src/components/PersonenListe/PersonenListenEintrag.ts","webpack://kontokorrent/./src/components/PersonenListe/PersonenListenEintrag.html","webpack://kontokorrent/./src/components/PersonenListe/PersonenListe.ts","webpack://kontokorrent/./src/components/PersonenListe/PersonenListe.html","webpack://kontokorrent/./src/components/CreateKontokorrent/CreateKontokorrent.ts","webpack://kontokorrent/./src/components/Spinner/Spinner.ts","webpack://kontokorrent/./src/components/Spinner/Spinner.html","webpack://kontokorrent/./src/components/convertLinks.ts","webpack://kontokorrent/./src/components/ui-components/popup/popup.ts","webpack://kontokorrent/./src/components/ui-components/tip-button/tip-button.ts","webpack://kontokorrent/./src/state/actions/KontokorrentHinzufuegenActionCreator.ts"],"sourcesContent":["// Module\nvar code = \"<div class=\\\"create-event-box\\\" id=\\\"create-event-box\\\"> <h1>Gruppe erstellen</h1> <div id=\\\"empty-name-error\\\" class=\\\"alert alert--error\\\" style=\\\"display:none\\\">Für alle Personen Namen angeben</div> <div id=\\\"person-count-error\\\" class=\\\"alert alert--error\\\" style=\\\"display:none\\\">Mindestens zwei Personen angeben </div> <div id=\\\"event-create-error\\\" class=\\\"alert alert--error\\\" style=\\\"display:none\\\">Kontokorrent konnte nicht erstellt werden</div> <div id=\\\"event-name-duplicate\\\" class=\\\"alert alert--error\\\" style=\\\"display:none\\\">Ein Kontokorrent mit diesem Namen exisitert bereits</div> <div id=\\\"event-name-required-error\\\" class=\\\"alert alert--error\\\" style=\\\"display:none\\\">Eventname angeben</div> <div id=\\\"event-name-error\\\" class=\\\"alert alert--error\\\" style=\\\"display:none\\\">Name: Nur Groß-/Kleinbuchstaben (A-Z, a-z) und Zahlen</div> <div id=\\\"person-name-duplicate-error\\\" class=\\\"alert alert--error\\\" style=\\\"display:none\\\">Personennamen müssen unterschiedlich sein</div> <div id=\\\"account-creation-failed\\\" class=\\\"alert alert--error\\\" style=\\\"display:none\\\">Account konnte nicht erstellt werden</div> <label for=\\\"event-name\\\" class=\\\"create-event-box__label\\\">Anzeigename</label> <div class=\\\"create-event-box__input-with-tip\\\"> <input type=\\\"text\\\" id=\\\"event-name\\\" name=\\\"event-name\\\"> <tip-button popup-id=\\\"eventNameExplainer\\\" title=\\\"Eventname erklärung\\\"> <span class=\\\"material-icons\\\"> info </span> </tip-button> <app-popup id=\\\"eventNameExplainer\\\" class=\\\"tip tip--with-input\\\"> Wie soll die Gruppe heißen? Groß- und Kleinbuchstaben (A-Z, a-z) sowie Zahlen sind erlaubt. Der Name wir auch zum Einloggen verwendet dabei wird Groß-/Kleinschreibung ignoriert. </app-popup> </div> <label class=\\\"create-event-box__label\\\">Personen</label> <app-personen-liste id=\\\"personen-liste\\\"></app-personen-liste> <div id=\\\"creating\\\" class=\\\"create-event-box__processing\\\"> <app-spinner> </app-spinner></div> <div> <button id=\\\"create-button\\\" class=\\\"button\\\">Erstellen</button> </div> <div> <a id=\\\"home-button\\\" class=\\\"button\\\" href=\\\"\\\"> <span class=\\\"material-icons\\\"> home </span> zurück </a> </div> </div>\";\n// Exports\nexport default code;","import template from \"./PersonenListenEintrag.html\";\n\nexport class PersonenListenEintrag extends HTMLElement {\n    private removeButton: HTMLButtonElement;\n    private nameInput: HTMLInputElement;\n    private rendered = false;\n\n    constructor() {\n        super();\n    }\n\n    connectedCallback() {\n        if (!this.rendered) {\n            this.innerHTML = template;\n            this.rendered = true;\n            this.removeButton = this.querySelector(\"#remove\");\n            this.nameInput = this.querySelector(\"#name\");\n        }\n        this.nameInput.addEventListener(\"change\", () => {\n            this.dispatchEvent(new Event(\"change\"));\n        });\n        this.removeButton.addEventListener(\"click\", () => {\n            this.dispatchEvent(new CustomEvent(\"onremove\"));\n        })\n    }\n\n    get name() {\n        return this.nameInput.value;\n    }\n\n    disconnectedCallback() {\n\n    }\n\n}\nexport const PersonenListenEintragTagName = 'app-personen-listen-eintrag';\ncustomElements.define(PersonenListenEintragTagName, PersonenListenEintrag);\n","// Module\nvar code = \"<input type=\\\"text\\\" id=\\\"name\\\" placehoder=\\\"Name\\\"/> <button id=\\\"remove\\\" class=\\\"button\\\"> <span class=\\\"material-icons\\\"> delete </span> entfernen </button>\";\n// Exports\nexport default code;","import template from \"./PersonenListe.html\";\nimport { PersonenListenEintrag, PersonenListenEintragTagName } from \"./PersonenListenEintrag\";\n\nexport class PersonenListe extends HTMLElement {\n    private addPersonButton: HTMLButtonElement;\n    private personenListe: HTMLUListElement;\n    private rendered = false;\n\n    constructor() {\n        super();\n    }\n\n    get personen() {\n        let names: string[] = [];\n        this.personenListe.querySelectorAll(PersonenListenEintragTagName).forEach((v: PersonenListenEintrag) => names.push(v.name));\n        return names;\n    }\n\n    connectedCallback() {\n        if (!this.rendered) {\n            this.innerHTML = template;\n            this.addPersonButton = this.querySelector(\"#add-person\");\n            this.personenListe = this.querySelector(\"#personen-liste\");\n            this.rendered = true;\n        }\n        this.addPersonButton.addEventListener(\"click\", () => {\n            let li = document.createElement(\"li\");\n            let e = new PersonenListenEintrag();\n            li.appendChild(e);\n            this.personenListe.appendChild(li);\n            e.querySelector(\"input\").focus();\n            e.addEventListener(\"onremove\", () => {\n                this.personenListe.removeChild(li);\n            });\n        });\n    }\n\n    disconnectedCallback() {\n\n    }\n\n}\n\ncustomElements.define('app-personen-liste', PersonenListe);\n","// Module\nvar code = \"<ul id=\\\"personen-liste\\\" class=\\\"mdc-list mdc-list--non-interactive\\\"> </ul> <button type=\\\"button\\\" class=\\\"button\\\" id=\\\"add-person\\\"> <span class=\\\"material-icons\\\"> add </span> Person hinzufügen </button>\";\n// Exports\nexport default code;","import template from \"./CreateKontokorrent.html\";\nimport { Store } from \"../../state/Store\";\nimport { ServiceLocator } from \"../../ServiceLocator\";\nimport { RoutingActionCreator, routingActionCreatorFactory } from \"../../state/actions/RoutingActionCreator\";\nimport { State } from \"../../state/State\";\nimport { AccountActionCreator, accountActionCreatorFactory } from \"../../state/actions/AccountActionCreator\";\nimport \"../PersonenListe/PersonenListe\";\nimport { PersonenListe } from \"../PersonenListe/PersonenListe\";\nimport { v4 as uuid } from \"uuid\";\nimport \"./CreateKontokorrent.scss\";\nimport { KontokorrentHinzufuegenActionCreator, kontokorrentHinzufuegenActionCreatorFactory } from \"../../state/actions/KontokorrentHinzufuegenActionCreator\";\nimport \"../ui-components/popup/popup\";\nimport \"../ui-components/tip-button/tip-button\";\nimport { convertLinks } from \"../convertLinks\";\nimport \"../Spinner/Spinner\";\n\nexport class CreateKontokorrent extends HTMLElement {\n    store: Store;\n    subscription: () => void;\n    routingActionCreator: RoutingActionCreator;\n    private accountActionCreator: AccountActionCreator;\n\n\n    private personenListe: PersonenListe;\n    private emptyNameError: HTMLDivElement;\n    private eventCreateError: HTMLDivElement;\n    private personCountError: HTMLDivElement;\n    private eventNameRequiredError: HTMLDivElement;\n    private createButton: HTMLButtonElement;\n    private eventName: HTMLInputElement;\n    private readonly kontokorrentId: string;\n    private creating: HTMLDivElement;\n    private eventNameDuplicate: HTMLDivElement;\n    private kontokorrentHinzufuegenActionCreator: KontokorrentHinzufuegenActionCreator;\n    private accountCreationFailed: HTMLDivElement;\n    private personNameDuplicateError: HTMLDivElement;\n    private rendered = false;\n    private eventNameError: HTMLDivElement;\n\n    constructor() {\n        super();\n        this.kontokorrentId = uuid();\n    }\n\n    addServices(serviceLocator: ServiceLocator) {\n        this.store = serviceLocator.store;\n        this.routingActionCreator = routingActionCreatorFactory(serviceLocator);\n        this.accountActionCreator = accountActionCreatorFactory(serviceLocator);\n        this.kontokorrentHinzufuegenActionCreator = kontokorrentHinzufuegenActionCreatorFactory(serviceLocator);\n    }\n\n    connectedCallback() {\n        if (!this.rendered) {\n            this.rendered = true;\n            this.innerHTML = template;\n            this.personenListe = this.querySelector(\"#personen-liste\");\n            this.emptyNameError = this.querySelector(\"#empty-name-error\");\n            this.eventCreateError = this.querySelector(\"#event-create-error\");\n            this.personCountError = this.querySelector(\"#person-count-error\");\n            this.eventNameRequiredError = this.querySelector(\"#event-name-required-error\");\n            this.eventNameError = this.querySelector(\"#event-name-error\");\n            this.createButton = this.querySelector(\"#create-button\");\n            this.eventName = this.querySelector(\"#event-name\");\n            this.creating = this.querySelector(\"#creating\");\n            this.eventNameDuplicate = this.querySelector(\"#event-name-duplicate\");\n            this.accountCreationFailed = this.querySelector(\"#account-creation-failed\");\n            this.personNameDuplicateError = this.querySelector(\"#person-name-duplicate-error\");\n        }\n\n        this.createButton.addEventListener(\"click\", this.createEvent.bind(this));\n        this.subscription = this.store.subscribe(null, state => this.applyStoreState(state));\n        this.applyStoreState(this.store.state);\n        convertLinks(this.querySelectorAll(\"a\"), this.routingActionCreator);\n    }\n\n    private async createEvent() {\n        let eventName = this.eventName.value;\n        let personNames = this.personenListe.personen;\n        this.eventNameRequiredError.style.display = eventName ? \"none\" : \"block\";\n        let personCountOk = personNames.length >= 2;\n        this.personCountError.style.display = personCountOk ? \"none\" : \"block\";\n        let personNameError = personNames.some(v => !v);\n        this.emptyNameError.style.display = personNameError ? \"block\" : \"none\";\n        let oeffentlicherName = (this.eventName.value || \"\").toLowerCase();\n        let nameError = (oeffentlicherName && !/^[a-z0-9]+$/.test(oeffentlicherName));\n        this.eventNameError.style.display = nameError ? \"block\" : \"none\";\n        let personNameDuplicateError = (personNames.some((item, index) => personNames.indexOf(item) != index));\n        this.personNameDuplicateError.style.display = personNameDuplicateError ? \"block\" : \"none\";\n        if (eventName && personCountOk && !personNameError && !nameError && !personNameDuplicateError) {\n            if (await this.accountActionCreator.ensureAccount()) {\n                if (await this.kontokorrentHinzufuegenActionCreator.kontokorrentErstellen(this.kontokorrentId, this.eventName.value, oeffentlicherName, personNames)) {\n                    await this.routingActionCreator.navigateKontokorrentById(this.kontokorrentId);\n                };\n            }\n        } else {\n            document.scrollingElement.scroll({ top: 0, behavior: \"smooth\" });\n        }\n    }\n\n    private applyStoreState(state: State) {\n        this.creating.style.display = state.kontokorrents.creating || state.account.accountCreating ? \"flex\" : \"none\";\n        this.eventCreateError.style.display = state.kontokorrents.creationFailed ? \"block\" : \"none\";\n        this.eventNameDuplicate.style.display = state.kontokorrents.creationFailed && state.kontokorrents.creationFailed.exists ? \"block\" : \"none\";\n        this.accountCreationFailed.style.display = !state.account.accountCreating && state.account.accountCreationFailed ?\n            \"block\" : \"none\";\n    }\n\n    disconnectedCallback() {\n        this.subscription();\n    }\n}\n\ncustomElements.define('app-create-event', CreateKontokorrent);","import template from \"./Spinner.html\";\n\nexport class Spinner extends HTMLElement {\n\n    constructor() {\n        super();\n        let shadowRoot = this.attachShadow({ mode: \"open\" });\n        shadowRoot.innerHTML = template;\n    }\n\n    connectedCallback() {\n\n    }\n\n    disconnectedCallback() {\n\n    }\n}\n\ncustomElements.define(\"app-spinner\", Spinner);\n","// Module\nvar code = \"<style>.spinner{animation:rotate 2s linear infinite;height:100%}.spinner .path{stroke:var(--spinner-color);stroke-linecap:round;animation:dash 1.5s ease-in-out infinite}@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}</style> <svg class=\\\"spinner\\\" viewBox=\\\"0 0 50 50\\\"> <circle class=\\\"path\\\" cx=\\\"25\\\" cy=\\\"25\\\" r=\\\"20\\\" fill=\\\"none\\\" stroke-width=\\\"4\\\"></circle> </svg>\";\n// Exports\nexport default code;","import { RoutingActionCreator } from \"../state/actions/RoutingActionCreator\";\n\nexport function convertLinks(elements: Array<HTMLAnchorElement> | NodeListOf<HTMLAnchorElement>, routingActionCreator: RoutingActionCreator) {\n    elements.forEach((e: HTMLAnchorElement) => {\n        e.addEventListener(\"click\", ev => {\n            ev.preventDefault();\n            routingActionCreator.navigate(e.getAttribute(\"href\"));\n        });\n    });\n}","export class Popup extends HTMLElement {\n    private popupShown: boolean = false;\n    constructor() {\n        super();\n        this.keyListener = this.keyListener.bind(this);\n        this.clickListener = this.clickListener.bind(this);\n    }\n\n    connectedCallback() {\n        this.updateStyles();\n    }\n\n    private keyListener(ev: KeyboardEvent) {\n        if (ev.key == \"Escape\") {\n            this.hide();\n        }\n    }\n\n    private clickListener(ev: MouseEvent | TouchEvent) {\n        if (!this.contains(<Element>(event.target))) {\n            this.hide();\n        }\n    }\n\n    public hide() {\n        if (this.popupShown) {\n            document.removeEventListener(\"keydown\", this.keyListener);\n            document.removeEventListener(\"click\", this.clickListener);\n            this.popupShown = false;\n            this.updateStyles();\n        }\n    }\n\n    public show() {\n        if (!this.popupShown) {\n            document.addEventListener(\"keydown\", this.keyListener);\n            document.addEventListener(\"click\", this.clickListener);\n            this.popupShown = true;\n            this.updateStyles();\n        }\n    }\n\n    private updateStyles() {\n        this.style.display = this.popupShown ? \"block\" : \"none\";\n    }\n\n    public toggle() {\n        if (!this.popupShown) {\n            this.show();\n        }\n        else {\n            this.hide();\n\n        }\n    }\n\n    disconnectedCallback() {\n        this.hide();\n    }\n}\ncustomElements.define(\"app-popup\", Popup);\n","import { Popup } from \"../popup/popup\";\n\nexport const PopupIdAttribute = \"popup-id\";\n\nexport class TipButton extends HTMLElement {\n    private popupId: string;\n    constructor() {\n        super();\n        this.clickListener = this.clickListener.bind(this);\n    }\n\n    attributeChangedCallback() {\n        this.updateAttributes();\n    }\n\n    private updateAttributes() {\n        this.popupId = this.getAttribute(PopupIdAttribute);\n\n    }\n\n    static get observedAttributes() {\n        return [PopupIdAttribute];\n    }\n\n    connectedCallback() {\n        this.addEventListener(\"click\", this.clickListener);\n    }\n\n    private clickListener(ev: MouseEvent) {\n        let popup: Popup = document.querySelector(`#${this.popupId}`);\n        popup.toggle();\n        ev.stopPropagation();\n    }\n\n\n    disconnectedCallback() {\n        this.removeEventListener(\"click\", this.clickListener);\n    }\n}\ncustomElements.define(\"tip-button\", TipButton);\n","import { ApiClient } from \"../../api/ApiClient\";\nimport { KontokorrentInfo } from \"../../api/KontokorrentInfo\";\nimport { NeuerKontokorrentRequest } from \"../../api/NeuerKontokorrentRequest\";\nimport { KontokorrentDatabase } from \"../../lib/KontokorrentDatabase\";\nimport { ServiceLocator } from \"../../ServiceLocator\";\nimport { Action } from \"../lib/Action\";\nimport { Store } from \"../Store\";\nimport { ActionNames } from \"./ActionNames\";\nimport { v4 as uuid } from \"uuid\";\n\nexport class KontokorrentCreationFailed implements Action {\n    readonly type = ActionNames.KontokorrentCreationFailed;\n    constructor(public exists: boolean) {\n\n    }\n}\n\nexport class KontokorrentCreating implements Action {\n    readonly type = ActionNames.KontokorrentCreating;\n    constructor() {\n\n    }\n}\n\nexport class KontokorrentCreated implements Action {\n    readonly type = ActionNames.KontokorrentCreated;\n    constructor(public kontokorrent: KontokorrentInfo) {\n\n    }\n}\n\nexport class KontokorrentHinzufuegenFailed implements Action {\n    readonly type = ActionNames.KontokorrentHinzufuegenFailed;\n    constructor(public notFound: boolean) {\n\n    }\n}\n\nexport class KontokorrentHinzufuegen implements Action {\n    readonly type = ActionNames.KontokorrentHinzufuegen;\n    constructor() {\n\n    }\n}\n\nexport class KontokorrentHinzufuegenSuccess implements Action {\n    readonly type = ActionNames.KontokorrentHinzufuegenSuccess;\n    constructor(public kontokorrents: KontokorrentInfo[]) {\n\n    }\n}\n\nexport class LoginPageGeoeffnet implements Action {\n    readonly type = ActionNames.LoginPageGeoeffnet;\n    constructor() {\n\n    }\n}\n\nexport class NichtGefundenPageGeoeffnet implements Action {\n    readonly type = ActionNames.NichtGefundenPageGeoeffnet;\n    constructor() {\n\n    }\n}\n\nexport type KontokorrentHinzufuegenActions = KontokorrentCreationFailed\n    | KontokorrentCreating\n    | KontokorrentCreated\n    | KontokorrentHinzufuegenFailed\n    | KontokorrentHinzufuegen\n    | KontokorrentHinzufuegenSuccess\n    | LoginPageGeoeffnet\n    | NichtGefundenPageGeoeffnet;\n\nexport class KontokorrentHinzufuegenActionCreator {\n\n    constructor(private store: Store,\n        private apiClient: ApiClient,\n        private db: KontokorrentDatabase) {\n\n    }\n\n    loginPageGeoeffnet() {\n        this.store.dispatch(new LoginPageGeoeffnet());\n    }\n\n    nichtGefundenPageGeoeffnet() {\n        this.store.dispatch(new NichtGefundenPageGeoeffnet());\n    }\n\n    async kontokorrentErstellen(id: string, name: string, oeffentlicherName: string, personen: string[]) {\n        let request: NeuerKontokorrentRequest = {\n            name,\n            id,\n            oeffentlicherName,\n            personen: personen.map(v => { return { name: v, id: uuid() } })\n        };\n        this.store.dispatch(new KontokorrentCreating());\n        let res = await this.apiClient.neuerKontokorrent(request);\n        if (!res.success) {\n            this.store.dispatch(new KontokorrentCreationFailed(res.exists));\n        }\n        else {\n            await this.db.addKontokorrent({\n                id: id,\n                name: name,\n                personen: request.personen,\n                oeffentlicherName: oeffentlicherName\n            });\n            this.store.dispatch(new KontokorrentCreated({\n                id: id,\n                name: name,\n                personen: request.personen,\n                oeffentlicherName: oeffentlicherName\n            }));\n            return true;\n        }\n        return false;\n    }\n\n    async kontokorrentHinzufuegen(oeffentlicherName: string) {\n        let kk = await this.db.getPerOeffentlichName(oeffentlicherName);\n        if (null != kk) {\n            return kk.id;\n        }\n        this.store.dispatch(new KontokorrentHinzufuegen());\n        try {\n            let res = await this.apiClient.kontokorrentHinzufuegen(oeffentlicherName, null);\n            if (null == res) {\n                this.store.dispatch(new KontokorrentHinzufuegenFailed(true));\n            }\n            else {\n                let newIds = await this.db.setKontokorrents(res.map(v => {\n                    return {\n                        id: v.id,\n                        name: v.name,\n                        personen: v.personen,\n                        oeffentlicherName: v.oeffentlicherName\n                    };\n                }));\n                this.store.dispatch(new KontokorrentHinzufuegenSuccess(res));\n                return newIds[0];\n            }\n        }\n        catch (err) {\n            this.store.dispatch(new KontokorrentHinzufuegenFailed(false));\n        }\n        return false;\n    }\n}\n\nexport function kontokorrentHinzufuegenActionCreatorFactory(serviceLocator: ServiceLocator) {\n    return serviceLocator.get(\"KontokorrentHinzufuegenActionCreator\",\n        serviceLocator => new KontokorrentHinzufuegenActionCreator(\n            serviceLocator.store,\n            serviceLocator.apiClient,\n            serviceLocator.db\n        ));\n}"],"names":["PersonenListenEintrag","HTMLElement","constructor","super","rendered","connectedCallback","this","innerHTML","removeButton","querySelector","nameInput","addEventListener","dispatchEvent","Event","CustomEvent","value","disconnectedCallback","PersonenListenEintragTagName","customElements","define","PersonenListe","names","personenListe","querySelectorAll","forEach","v","push","name","addPersonButton","li","document","createElement","e","appendChild","focus","removeChild","CreateKontokorrent","kontokorrentId","addServices","serviceLocator","store","routingActionCreator","accountActionCreator","kontokorrentHinzufuegenActionCreator","emptyNameError","eventCreateError","personCountError","eventNameRequiredError","eventNameError","createButton","eventName","creating","eventNameDuplicate","accountCreationFailed","personNameDuplicateError","createEvent","bind","subscription","subscribe","state","applyStoreState","convertLinks","personNames","personen","style","display","personCountOk","length","personNameError","some","oeffentlicherName","toLowerCase","nameError","test","item","index","indexOf","scrollingElement","scroll","top","behavior","ensureAccount","kontokorrentErstellen","navigateKontokorrentById","kontokorrents","account","accountCreating","creationFailed","exists","Spinner","attachShadow","mode","elements","ev","preventDefault","navigate","getAttribute","Popup","popupShown","keyListener","clickListener","updateStyles","key","hide","contains","event","target","removeEventListener","show","toggle","PopupIdAttribute","TipButton","attributeChangedCallback","updateAttributes","popupId","stopPropagation","KontokorrentCreationFailed","type","KontokorrentCreating","KontokorrentCreated","kontokorrent","KontokorrentHinzufuegenFailed","notFound","KontokorrentHinzufuegen","KontokorrentHinzufuegenSuccess","LoginPageGeoeffnet","NichtGefundenPageGeoeffnet","KontokorrentHinzufuegenActionCreator","apiClient","db","loginPageGeoeffnet","dispatch","nichtGefundenPageGeoeffnet","id","request","map","res","neuerKontokorrent","success","addKontokorrent","kk","getPerOeffentlichName","kontokorrentHinzufuegen","newIds","setKontokorrents","err","kontokorrentHinzufuegenActionCreatorFactory","get"],"sourceRoot":""}