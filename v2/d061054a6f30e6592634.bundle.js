!function(e){function t(t){for(var n,o,i=t[0],a=t[1],s=0,u=[];s<i.length;s++)o=i[s],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);u.length;)u.shift()()}var n={},r={0:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=i);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+""+e+"."+{1:"ca888c566506a9ee8493"}[e]+".bundle.js"}(e);var c=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}r[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/v2/",o.oe=function(e){throw console.error(e),e};var i=self.webpackJsonp=self.webpackJsonp||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var c=a;o(o.s=49)}([function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return E}));var r,o=n(1),i=n(50),a=n(20),s=n(21),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e.KontokorrentCreating="KontokorrentCreating",e.KontokorrentCreated="KontokorrentCreated",e.KontokorrentCreationFailed="KontokorrentCreationFailed",e.KontokorrentHinzufuegenFailed="KontokorrentHinzufuegenFailed",e.KontokorrentHinzufuegen="KontokorrentHinzufuegen",e.KontokorrentHinzufuegenSuccess="KontokorrentHinzufuegenSuccess",e.KontokorrentListeLaden="KontokorrentListeLaden",e.KontokorrentListe="KontokorrentListe",e.KontokorrentListeLadenFailed="KontokorrentListeLadenFailed",e.KontokorrentGeoeffnet="KontokorrentGeoeffnet",e.KontokorrentBezahlungen="KontokorrentBezahlungen",e.KontokorrentSynchronisieren="KontokorrentSynchronisieren",e.KontokorrentSynchronisiert="KontokorrentSynchronisiert",e.KontokorrentBalanceAktualisiert="KontokorrentBalanceAktualisiert",e.LoginPageGeoeffnet="LoginPageGeoeffnet"}(r||(r={}));class u{constructor(e){this.exists=e,this.type=r.KontokorrentCreationFailed}}class l{constructor(){this.type=r.KontokorrentCreating}}class d{constructor(e){this.kontokorrent=e,this.type=r.KontokorrentCreated}}class h{constructor(e){this.notFound=e,this.type=r.KontokorrentHinzufuegenFailed}}class f{constructor(){this.type=r.KontokorrentHinzufuegen}}class g{constructor(e){this.kontokorrents=e,this.type=r.KontokorrentHinzufuegenSuccess}}class p{constructor(){this.type=r.KontokorrentListeLaden}}class m{constructor(e){this.kontokorrents=e,this.type=r.KontokorrentListe}}class b{constructor(e){this.interactionRequired=e,this.type=r.KontokorrentListeLadenFailed}}class k{constructor(e){this.id=e,this.type=r.KontokorrentGeoeffnet}}class v{constructor(e,t){this.kontokorrentId=e,this.bezahlungen=t,this.type=r.KontokorrentBezahlungen}}class y{constructor(e){this.kontokorrentId=e,this.type=r.KontokorrentSynchronisieren}}class w{constructor(e){this.kontokorrentId=e,this.type=r.KontokorrentSynchronisiert}}class S{constructor(e,t){this.kontokorrentId=e,this.balance=t,this.type=r.KontokorrentBalanceAktualisiert}}class C{constructor(){this.type=r.LoginPageGeoeffnet}}class E{constructor(e,t,n,r){this.store=e,this.apiClient=t,this.routingActionCreator=n,this.db=r}loginPageGeoeffnet(){this.store.dispatch(new C)}kontokorrentErstellen(e,t,n,r){return c(this,void 0,void 0,(function*(){let o={name:t,id:e,oeffentlicherName:n,personen:r.map(e=>({name:e,id:Object(i.a)()}))};this.store.dispatch(new l);let a=yield this.apiClient.neuerKontokorrent(o);return a.success?(yield this.db.addKontokorrent({id:e,name:t,laufendeNummer:0,personen:o.personen,oeffentlicherName:n}),this.store.dispatch(new d({id:e,name:t,personen:o.personen,oeffentlicherName:n})),!0):(this.store.dispatch(new u(a.exists)),!1)}))}kontokorrentHinzufuegen(e){return c(this,void 0,void 0,(function*(){let t=yield this.db.getPerOeffentlichName(e);if(null!=t)return t.id;this.store.dispatch(new f);try{let t=yield this.apiClient.kontokorrentHinzufuegen(e,null);if(null!=t){let e=yield this.db.setKontokorrents(t.map(e=>({id:e.id,laufendeNummer:null,name:e.name,personen:e.personen,oeffentlicherName:e.oeffentlicherName})));return this.store.dispatch(new g(t)),e[0]}this.store.dispatch(new h(!0))}catch(e){this.store.dispatch(new h(!1))}return!1}))}navigiereZuLetztGesehenem(e){return c(this,void 0,void 0,(function*(){let t=yield this.db.getZuletztGesehenerKontokorrentId();return!!t&&(this.routingActionCreator.navigateKontokorrent(t,e),!0)}))}syncKontokorrentListe(){return c(this,void 0,void 0,(function*(){this.store.dispatch(new p);const e=this.apiClient.kontokorrentsAuflisten();let t=yield this.db.getKontokorrents();this.store.dispatch(new m(t));try{let t=yield e;yield this.db.setKontokorrents(t.map(e=>({id:e.id,laufendeNummer:null,name:e.name,personen:e.personen,oeffentlicherName:e.oeffentlicherName}))),this.store.dispatch(new m(t))}catch(e){e instanceof o.a?this.store.dispatch(new b(!0)):this.store.dispatch(new b(!1))}}))}refreshBezahlungen(e){return c(this,void 0,void 0,(function*(){let t=yield this.db.getAktionen(e);this.store.dispatch(new v(e,Object(s.a)(t)))}))}calculateBalance(e){return c(this,void 0,void 0,(function*(){let t=yield(yield this.getWorkerApi()).calculateBalance(e);this.store.dispatch(new S(e,t))}))}refreshKontokorrent(e){return c(this,void 0,void 0,(function*(){yield Promise.all([this.refreshBezahlungen(e),this.calculateBalance(e)])}))}kontokorrentSynchronisieren(e,t){return c(this,void 0,void 0,(function*(){this.store.dispatch(new y(e));let n=yield this.apiClient.getAktionen(e,t);n.success&&(yield this.db.addAktionen(e,n.aktionen),n.aktionen.length>0&&(yield this.refreshKontokorrent(e))),this.store.dispatch(new w(e))}))}getWorkerApi(){return c(this,void 0,void 0,(function*(){if(this.workerApi)return this.workerApi;const t=new Worker(e,{name:"kontokorrent-worker",type:void 0});return this.workerApi=Object(a.a)(t),this.workerApi}))}kontokorrentOeffnen(e){return c(this,void 0,void 0,(function*(){let t=yield this.db.getKontokorrent(e);if(null!=t){this.store.dispatch(new k(e));let n=[];n.push(this.db.setZuletztGesehenerKontokorrentId(e)),n.push(this.refreshKontokorrent(e)),n.push(this.kontokorrentSynchronisieren(e,t.laufendeNummer)),yield Promise.all(n)}}))}}}).call(this,n(32))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{}},function(e,t,n){"use strict";function r(e,t){e.forEach(e=>{e.addEventListener("click",n=>{n.preventDefault(),t.navigate(e.getAttribute("href"))})})}n.d(t,"a",(function(){return r}))},,function(e,t){e.exports="<app-bar></app-bar> <div style=display:none id=login-expired>Google-Login abgelaufen: zum Synchronisieren neu anmelden</div>"},function(e,t){e.exports='<header class=app-bar> <kontokorrent-select class=app-bar__kontokorrent-select></kontokorrent-select> <nav class=app-bar__links> <button id=logout-button class=app-bar__link title=Logout> <span class=material-icons> exit_to_app </span> </button> <a href=info class=app-bar__link title="Informationen über diese App"> <span class=material-icons> info </span> </a> </nav> </header> <app-popup id=logout-dialog> <div class=dialog__backdrop></div> <div class=dialog> <p> Wirklich aus allen Kontokorrents ausloggen? </p> <div class=dialog__button-pane> <button id=abort-logout class=button>Abbrechen</button> <button id=confirm-logout class=button>Ausloggen</button> </div> </div> </app-popup>'},function(e,t){e.exports='<div class=kontokorrent-select-wrapper> <div class=kontokorrent-select> <h1 data-ref=kontokorrent-name class=kontokorrent-select__name>Kontokorrent</h1> <button class=kontokorrent-select__choose title="anderen Kontokorrent wählen"> <span class=material-icons> arrow_drop_down </span> </button> </div> <app-popup class=kontokorrent-select__popup> <kontokorrent-select-list></kontokorrent-select-list> <div class=kontokorrent-select__buttons> <button id=add-kontokorrent class=button>weiteren hinzufügen</button> </div> </app-popup> </div>'},function(e,t){e.exports="<ol data-ref=list class=kontokorrent-select-list> </ol>"},function(e,t){e.exports="<a data-ref=link class=kontokorrent-select-list__entry> <span data-ref=name></span> </a>"},function(e,t){e.exports="<h1>Speicherzugriff benötigt</h1> Kontokorrent speichert die Zahlungen und weitere Informationen im lokalen Speicher dieses Geräts. Auf diese Weise kann man für einige Tage eingeloggt bleiben, und die Anwendung auch verwenden, wenn die Internetverbindung schlecht ist. In den meisten Browsern (Chrome, Edge) muss dazu der Webseite erlaubt werden <strong>Cookies</strong> zu speichern. Nachdem die Berechtigung erteilt wurde die Webseite neu laden."},function(e,t){e.exports='<div class=login-error-box> <div id=eventMissingError class="alert alert--error" style=display:none>Kontokorrentnamen eingeben</div> <div id=notFoundError class="alert alert--error" style=display:none>Kontokorrent wurde nicht gefunden</div> <div id=account-creation-failed class="alert alert--error" style=display:none>Account konnte nicht erstellt werden</div> </div> <div class=login-box id=login-box> <div class=login-box__event-input> <input type=text id=eventInput placeholder=Kontokorrentname> <tip-button popup-id=oeffentlicherNameExplainer title="öffentlicher Name Erklärung"> <span class=material-icons> info </span> </tip-button> <app-popup id=oeffentlicherNameExplainer class="tip tip--with-input"> Gib hier den Namen des öffentlichen Kontokorrents ein. <ul> <li>frag die anderen Event-/Gruppen- Teilnehmer nach dem Namen</li> <li>such in eurem Chat</li> <li>oder lass dir einen Einladungslink schicken</li> </ul> </app-popup> </div> <div> <button id=loginButton class="button button--raised login-box__login-button"> Login </button> <div id=processing class=login-box__processing style=display:none> <span class=spinner></span> </div> </div> <a id=createEventButton class=button href=create-event> <span class=material-icons> add </span> Gruppe erstellen </a> <a id=home-button class=button href=""> <span class=material-icons> home </span> zurück </a> </div>'},function(e,t){e.exports="<h1>Event erstellen</h1> <label for=event-name>Eventname</label> <input type=text id=event-name name=event-name> <label for=event-name>Oeffentlich</label> <input type=checkbox id=oeffentlich name=oeffentlich checked=checked> <div id=oeffentlich-box> <label for=oeffentlicher-name>Öffentlicher Name</label> <input type=text id=oeffentlicher-name name=oeffentlicher-name> </div> <div id=empty-name-error style=display:none>Für alle Personen Namen angeben</div> <div id=person-count-error style=display:none>Mindestens zwei Personen angeben</div> <div id=event-create-error style=display:none>Kontokorrent konnte nicht erstellt werden</div> <div id=event-name-duplicate style=display:none>Ein Kontokorrent mit diesem Namen exisitert bereits</div> <div id=event-name-error style=display:none>Eventname angeben</div> <div id=oeffentlicher-name-error style=display:none>Öfferntlicher Name: Nur Kleinbuchstaben und Zahlen</div> <div id=person-name-duplicate-error style=display:none>Personennamen müssen unterschiedlich sein</div> <div id=creating style=display:none>Wird erstellt</div> <div id=account-creation-failed style=display:none>Account konnte nicht erstellt werden</div> <app-personen-liste id=personen-liste></app-personen-liste> <button id=create-button>Erstellen</button>"},function(e,t){e.exports='<ul id=personen-liste class="mdc-list mdc-list--non-interactive"> </ul> <button type=button id=add-person>Person hinzufügen</button>'},function(e,t){e.exports="<input type=text id=name placehoder=Name /> <button id=remove>entfernen</button>"},function(e,t){e.exports="<app-bar></app-bar> <div style=display:none id=login-expired>Google-Login abgelaufen: zum Synchronisieren neu anmelden</div> <balance-anzeige id=balance-anzeige></balance-anzeige> <div class=kontokorrentpage-menu> <span class=kontokorrentpage-menu__sync-display id=spinner style=display:none> <div class=spinner></div> synchronisieren </span> </div> <bezahlungen-view id=bezahlungen-view></bezahlungen-view>"},function(e,t){e.exports="<div class=balance-anzeige-element__graphic-container> <div class=balance-anzeige-element__bar data-ref=bar></div> <div class=balance-anzeige-element__horizontal-line></div> <span class=balance-anzeige-element__balance data-ref=balance-container> <span data-ref=balance-text></span>€ </span> </div> <div class=balance-anzeige-element__text-container> <span data-ref=person-name class=balance-anzeige-element__name></span> </div>"},function(e,t){e.exports="<div class=balance-anzeige-element__graphic-container> <div class=balance-anzeige-element__bar data-ref=bar></div> <div class=balance-anzeige-element__horizontal-line></div> <span class=balance-anzeige-element__balance data-ref=balance-container> <span data-ref=balance-text></span>€ </span> </div> <div class=balance-anzeige-element__text-container> <span data-ref=person-name class=balance-anzeige-element__name></span> </div>"},function(e,t){e.exports="<div id=bezahlungen-container> </div> <button id=show-more class=button>Mehr anzeigen</button>"},function(e,t){e.exports="<div class=bezahlung-card__beschreibung> <div data-ref=beschreibung></div> <div class=bezahlung-card__personen> <span data-ref=bezahlende-person></span> für <span data-ref=empfaenger></span> </div> </div> <div class=bezahlung-card__wert> <span data-ref=wert></span>€ </div>"},function(e,t){e.exports="<h3 data-ref=title class=bezahlungen-group__title>Gruppe</h3> <div class=bezahlungen-group__container data-ref=container></div>"},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));const r=Symbol("Comlink.proxy"),o=Symbol("Comlink.endpoint"),i=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.thrown"),s=e=>"object"==typeof e&&null!==e||"function"==typeof e,c=new Map([["proxy",{canHandle:e=>s(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return function e(t,n=self){n.addEventListener("message",(function o(i){if(!i||!i.data)return;const{id:s,type:c,path:l}=Object.assign({path:[]},i.data),d=(i.data.argumentList||[]).map(p);let h;try{const n=l.slice(0,-1).reduce((e,t)=>e[t],t),o=l.reduce((e,t)=>e[t],t);switch(c){case 0:h=o;break;case 1:n[l.slice(-1)[0]]=p(i.data.value),h=!0;break;case 2:h=o.apply(n,d);break;case 3:h=function(e){return Object.assign(e,{[r]:!0})}(new o(...d));break;case 4:{const{port1:n,port2:r}=new MessageChannel;e(t,r),h=function(e,t){return f.set(e,t),e}(n,[n])}break;case 5:h=void 0}}catch(e){h={value:e,[a]:0}}Promise.resolve(h).catch(e=>({value:e,[a]:0})).then(e=>{const[t,r]=g(e);n.postMessage(Object.assign(Object.assign({},t),{id:s}),r),5===c&&(n.removeEventListener("message",o),u(n))})})),n.start&&n.start()}(e,t),[n,[n]]},deserialize:e=>(e.start(),l(e))}],["throw",{canHandle:e=>s(e)&&a in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function u(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function l(e,t){return function e(t,n=[],r=function(){}){let a=!1;const s=new Proxy(r,{get(r,o){if(d(a),o===i)return()=>m(t,{type:5,path:n.map(e=>e.toString())}).then(()=>{u(t),a=!0});if("then"===o){if(0===n.length)return{then:()=>s};const e=m(t,{type:0,path:n.map(e=>e.toString())}).then(p);return e.then.bind(e)}return e(t,[...n,o])},set(e,r,o){d(a);const[i,s]=g(o);return m(t,{type:1,path:[...n,r].map(e=>e.toString()),value:i},s).then(p)},apply(r,i,s){d(a);const c=n[n.length-1];if(c===o)return m(t,{type:4}).then(p);if("bind"===c)return e(t,n.slice(0,-1));const[u,l]=h(s);return m(t,{type:2,path:n.map(e=>e.toString()),argumentList:u},l).then(p)},construct(e,r){d(a);const[o,i]=h(r);return m(t,{type:3,path:n.map(e=>e.toString()),argumentList:o},i).then(p)}});return s}(e,[],t)}function d(e){if(e)throw new Error("Proxy has been released and is not useable")}function h(e){const t=e.map(g);return[t.map(e=>e[0]),(n=t.map(e=>e[1]),Array.prototype.concat.apply([],n))];var n}const f=new WeakMap;function g(e){for(const[t,n]of c)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:3,name:t,value:r},o]}return[{type:0,value:e},f.get(e)||[]]}function p(e){switch(e.type){case 3:return c.get(e.name).deserialize(e.value);case 0:return e.value}}function m(e,t,n){return new Promise(r=>{const o=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===o&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)})}},function(e,t,n){"use strict";function r(e){let t={};for(let n of e)n.bearbeiteteBezahlungId&&delete t[n.bearbeiteteBezahlungId],n.geloeschteBezahlungId?delete t[n.bearbeiteteBezahlungId]:t[n.bezahlung.id]=n.bezahlung;return Object.values(t)}n.d(t,"a",(function(){return r}))},function(e,t){var n="\\v2\\sw.js";Object.defineProperty(t,"__esModule",{value:!0}),t.default={register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!navigator.serviceWorker&&navigator.serviceWorker.register(n,e)}},e.exports=t.default},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"0.150e5485e9deb3cfeedb.bundle.worker.js"},function(e,t,n){},function(e,t,n){const r=n(35);r.keys().forEach(r)},function(e,t,n){var r={"./android-chrome-192x192.png":36,"./android-chrome-512x512.png":37,"./apple-touch-icon.png":38,"./browserconfig.xml":39,"./favicon-16x16.png":40,"./favicon-32x32.png":41,"./favicon.ico":42,"./mstile-144x144.png":43,"./mstile-150x150.png":44,"./mstile-310x150.png":45,"./mstile-310x310.png":46,"./mstile-70x70.png":47,"./safari-pinned-tab.svg":48};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=35},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/android-chrome-192x192.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/android-chrome-512x512.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/apple-touch-icon.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/browserconfig.xml"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/favicon-16x16.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/favicon-32x32.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/favicon.ico"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/mstile-144x144.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/mstile-150x150.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/mstile-310x150.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/mstile-310x310.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/mstile-70x70.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"favicons/safari-pinned-tab.svg"},function(e,t,n){"use strict";n.r(t);class r{constructor(e,t){this.routeResolver=e,this.routeRenderer=t,this.lastRoute=null,this.popStateListener=this.handlePopState.bind(this)}handlePopState(e){this.doRouting(window.location.pathname)}run(){let e=document.querySelector("base");this.basePrefix=e.getAttribute("href"),this.baseHref=e.href,window.addEventListener("popstate",this.popStateListener),this.doRouting(window.location.pathname)}destroy(){window.removeEventListener("popstate",this.popStateListener)}doRouting(e){let t=this.getRoute(e);return Promise.resolve(this.routeResolver.resolve(this.lastRoute,t,this)).then(e=>!!e&&(this.routeRenderer.render(e),this.lastRoute=t,!0))}getRoute(e){let t=e===this.baseHref,n=e.substr(0,this.basePrefix.length)===this.basePrefix;return t?"/":n?e.substring(this.basePrefix.length):e}navigate(e,t,n){let r=new URL(e,this.baseHref);this.doRouting(r.pathname).then(e=>{e&&(n?window.history.replaceState({},t||document.title,r.href):window.history.pushState({},t||document.title,r.href))})}}class o{constructor(){this.currentComponent=null}render(e){e&&(this.currentComponent&&document.body.removeChild(this.currentComponent),document.body.appendChild(e),this.currentComponent=e)}}var i=n(4),a=n.n(i),s=n(5),c=n.n(s),u=(n(23),n(24),n(2)),l=n(6),d=n.n(l),h=(n(25),n(7)),f=n.n(h);n(26);function g(e,t){return e.sort((e,n)=>t(e).toLowerCase().localeCompare(t(n).toLowerCase()))}function p(e,t,n,r,o){for(let r of e.children){let i=t.find(e=>r.getAttribute("data-ref")==n(e));i?o(r,i):e.removeChild(r)}let i=null;for(let a of t){let t=n(a),s=e.querySelector(`:scope > [data-ref="${t}"]`);s||(s=r(a),s.setAttribute("data-ref",t),o(s,a)),null==i&&s!=e.firstElementChild?e.prepend(s):null!=i&&i.nextElementSibling!=s&&i.insertAdjacentElement("afterend",s),i=s}}var m=n(8),b=n.n(m);class k extends HTMLElement{constructor(){super(),this.innerHTML=b.a,this.name=this.querySelector('[data-ref="name"]'),this.link=this.querySelector('[data-ref="link"]'),this.clickEvent=this.clickEvent.bind(this)}connectedCallback(){this.link.addEventListener("click",this.clickEvent)}clickEvent(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("gotokontokorrent",{detail:this.kontokorrent.id,bubbles:!0}))}disconnectedCallback(){this.link.removeEventListener("click",this.clickEvent)}update(e,t){this.kontokorrent=e,this.name.innerText=e.name,this.link.href="kontokorrents/"+e.id,this.link.classList.toggle("kontokorrent-select-list__entry--active",t)}}customElements.define("kontokorrent-select-list-entry",k);class v extends HTMLElement{constructor(){super(),this.innerHTML=f.a,this.list=this.querySelector('[data-ref="list"]'),this._kontokorrents=[]}connectedCallback(){}disconnectedCallback(){}update(){var e,t,n,r;e=this.list,t=this._kontokorrents,n=()=>new k,r=(e,t)=>e.update(t,this._activeKontokorrentId==t.id),p(e,t,e=>e.id,e=>{let t=document.createElement("li");return t.appendChild(n(e)),t},(e,t)=>{let n=e.firstChild;r(n,t)})}set kontokorrents(e){this._kontokorrents=g(e,e=>e.name),this.update()}set activeKontokorrentId(e){this._activeKontokorrentId=e,this.update()}}customElements.define("kontokorrent-select-list",v);class y extends HTMLElement{constructor(){super(),this.popupShown=!1,this.keyListener=this.keyListener.bind(this),this.clickListener=this.clickListener.bind(this)}connectedCallback(){this.updateStyles()}keyListener(e){"Escape"==e.key&&this.hide()}clickListener(e){this.contains(event.target)||this.hide()}hide(){this.popupShown&&(document.removeEventListener("keydown",this.keyListener),document.removeEventListener("click",this.clickListener),this.popupShown=!1,this.updateStyles())}show(){this.popupShown||(document.addEventListener("keydown",this.keyListener),document.addEventListener("click",this.clickListener),this.popupShown=!0,this.updateStyles())}updateStyles(){this.style.display=this.popupShown?"block":"none"}toggle(){this.popupShown?this.hide():this.show()}disconnectedCallback(){this.hide()}}customElements.define("app-popup",y);class w extends HTMLElement{constructor(){super(),this.innerHTML=d.a,this.kontokorrentName=this.querySelector('[data-ref="kontokorrent-name"]'),this.kontokorrentSelectList=this.querySelector("kontokorrent-select-list"),this.addButton=this.querySelector("#add-kontokorrent"),this._kontokorrents=null}connectedCallback(){this.popup=this.querySelector("app-popup"),this.updateAttributes(),this.addEventListener("click",e=>{this.popup.contains(event.target)||(this.popup.toggle(),e.stopPropagation())}),this.addButton.addEventListener("click",e=>{this.dispatchEvent(new CustomEvent("addkontokorrent"))}),this.kontokorrentSelectList.addEventListener("gotokontokorrent",()=>{this.popup.hide()})}disconnectedCallback(){}attributeChangedCallback(){this.updateAttributes()}updateAttributes(){this.activeKontokorrentId=this.getAttribute("active-kontokorrent-id"),this.kontokorrentSelectList.activeKontokorrentId=this.activeKontokorrentId,this.updatesStyle()}static get observedAttributes(){return["active-kontokorrent-id"]}set kontokorrents(e){this.kontokorrentSelectList.kontokorrents=e,this._kontokorrents=e,this.updatesStyle()}updatesStyle(){if(this._kontokorrents&&this._kontokorrents.length){let e=this._kontokorrents.find(e=>e.id==this.activeKontokorrentId);this.kontokorrentName.innerText=e?e.name:"(Kontokorrent wählen)"}}}customElements.define("kontokorrent-select",w);var S=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class C extends HTMLElement{constructor(){super(),this.innerHTML=c.a,this.kontokorrentSelect=this.querySelector("kontokorrent-select"),this.logoutDialog=this.querySelector("#logout-dialog")}connectedCallback(){document.body.classList.add("body--app-bar"),this.querySelector("#logout-button").addEventListener("click",e=>{this.logoutDialog.toggle(),e.stopPropagation()}),this.querySelector("#confirm-logout").addEventListener("click",()=>S(this,void 0,void 0,(function*(){yield this.accountActionCreator.logout()}))),this.querySelector("#abort-logout").addEventListener("click",()=>{this.logoutDialog.hide()}),Object(u.a)(this.querySelectorAll("a"),this.routingActionCreator),this.subscription=this.store.subscribe(null,e=>this.applyStoreState(e)),this.applyStoreState(this.store.state),this.kontokorrentSelect.addEventListener("addkontokorrent",()=>{this.routingActionCreator.navigateLogin()}),this.kontokorrentSelect.addEventListener("gotokontokorrent",e=>{this.routingActionCreator.navigateKontokorrent(e.detail)})}applyStoreState(e){this.kontokorrentSelect.kontokorrents=Object.values(e.kontokorrents.kontokorrents),this.kontokorrentSelect.setAttribute("active-kontokorrent-id",e.kontokorrents.activeKontokorrentId)}addServices(e){this.store=e.store,this.routingActionCreator=e.routingActionCreator,this.accountActionCreator=e.accountActionCreator,this.kontokorrentsActionCreator=e.kontokorrentsActionCreator}disconnectedCallback(){document.body.classList.remove("body--app-bar"),this.subscription()}}customElements.define("app-bar",C);class E extends HTMLElement{constructor(){super(),this.innerHTML=a.a,this.appBar=this.querySelector("app-bar")}addServices(e){this.store=e.store,this.routingActionCreator=e.routingActionCreator,this.accountActionCreator=e.accountActionCreator,this.kontokorrentsActionCreator=e.kontokorrentsActionCreator,this.appBar.addServices(e)}connectedCallback(){this.loginExpired=this.querySelector("#login-expired"),this.subscription=this.store.subscribe(null,e=>this.applyStoreState(e)),this.applyStoreState(this.store.state),this.kontokorrentsActionCreator.navigiereZuLetztGesehenem(!0)}applyStoreState(e){this.loginExpired.style.display=e.account.loginExpired?"block":"none"}disconnectedCallback(){this.subscription()}}customElements.define("app-home",E);var M=n(9),x=n.n(M);function z(){let e="indexedDB"in window,t="localStorage"in window,n=null;try{localStorage.setItem("test","1"),n=!0}catch(e){n=!1}return{allPassed:e&&t&&n,indexedDBEnabled:e,localStorageEnabled:t,storageAllowed:n}}class A extends HTMLElement{constructor(){super(),this.innerHTML=x.a}addServices(e){this.routingActionCreator=e.routingActionCreator}connectedCallback(){z().allPassed&&(this.routingActionCreator.navigateHome(),window.location.reload())}disconnectedCallback(){}}customElements.define("app-features-required",A);var L=n(10),O=n.n(L);n(27);class T extends HTMLElement{constructor(){super(),this.clickListener=this.clickListener.bind(this)}attributeChangedCallback(){this.updateAttributes()}updateAttributes(){this.popupId=this.getAttribute("popup-id")}static get observedAttributes(){return["popup-id"]}connectedCallback(){this.addEventListener("click",this.clickListener)}clickListener(e){document.querySelector("#"+this.popupId).toggle(),e.stopPropagation()}disconnectedCallback(){this.removeEventListener("click",this.clickListener)}}customElements.define("tip-button",T);var P=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class j extends HTMLElement{constructor(){super(),this.innerHTML=O.a}addServices(e){this.store=e.store,this.routingActionCreator=e.routingActionCreator,this.accountActionCreator=e.accountActionCreator,this.kontokorrentsActionCreator=e.kontokorrentsActionCreator}connectedCallback(){Object(u.a)(this.querySelectorAll("a"),this.routingActionCreator),this.eventInput=this.querySelector("#eventInput"),this.loginButton=this.querySelector("#loginButton"),this.homeButton=this.querySelector("#home-button"),this.loginBox=this.querySelector("#login-box"),this.eventMissingError=this.querySelector("#eventMissingError"),this.accountCreationFailed=this.querySelector("#account-creation-failed"),this.notFoundError=this.querySelector("#notFoundError"),this.processing=this.querySelector("#processing"),this.loginButton.addEventListener("click",this.loginFuerEvent.bind(this)),this.subscription=this.store.subscribe(null,e=>this.applyStoreState(e)),this.applyStoreState(this.store.state),this.accountActionCreator.initializeAccount(),this.kontokorrentsActionCreator.loginPageGeoeffnet()}loginFuerEvent(){return P(this,void 0,void 0,(function*(){let e=this.eventInput.value;if(this.eventMissingError.style.display=e?"none":"block",e&&(yield this.accountActionCreator.ensureAccount())){let t=yield this.kontokorrentsActionCreator.kontokorrentHinzufuegen(e);t&&this.routingActionCreator.navigateKontokorrent(t)}}))}applyStoreState(e){this.accountCreationFailed.style.display=!e.account.accountCreating&&e.account.accountCreationFailed?"block":"none",this.notFoundError.style.display=!e.kontokorrents.hinzufuegen&&e.kontokorrents.hinzufuegenFailed&&e.kontokorrents.hinzufuegenFailed.kontokorrentNotFound?"block":"none";let t=e.kontokorrents.hinzufuegen||e.account.accountCreating;this.processing.style.display=t?"flex":"none",this.homeButton.style.visibility=e.account.accountCreated&&Object.keys(e.kontokorrents.kontokorrents).length?"visible":"hidden",this.loginButton.style.display=t?"none":"inline-flex"}disconnectedCallback(){this.subscription()}}customElements.define("app-login",j);var I=n(11),N=n.n(I),D=n(12),K=n.n(D),_=n(13),q=n.n(_);class H extends HTMLElement{constructor(){super(),this.innerHTML=q.a}connectedCallback(){this.removeButton=this.querySelector("#remove"),this.nameInput=this.querySelector("#name"),this.nameInput.addEventListener("change",()=>{this.dispatchEvent(new Event("change"))}),this.removeButton.addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("onremove"))})}get name(){return this.nameInput.value}disconnectedCallback(){}}customElements.define("app-personen-listen-eintrag",H);class W extends HTMLElement{constructor(){super(),this.innerHTML=K.a}get personen(){let e=[];return this.personenListe.querySelectorAll("app-personen-listen-eintrag").forEach(t=>e.push(t.name)),e}connectedCallback(){this.addPersonButton=this.querySelector("#add-person"),this.personenListe=this.querySelector("#personen-liste"),this.addPersonButton.addEventListener("click",()=>{let e=document.createElement("li"),t=new H;e.appendChild(t),this.personenListe.appendChild(e),t.addEventListener("onremove",()=>{this.personenListe.removeChild(e)})})}disconnectedCallback(){}}customElements.define("app-personen-liste",W);var B=n(50),F=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class U extends HTMLElement{constructor(){super(),this.innerHTML=N.a,this.kontokorrentId=Object(B.a)(),this.oeffentlicherNameManuell=!1}addServices(e){this.store=e.store,this.routingActionCreator=e.routingActionCreator,this.accountActionCreator=e.accountActionCreator,this.kontokorrentsActionCreator=e.kontokorrentsActionCreator}connectedCallback(){this.personenListe=this.querySelector("#personen-liste"),this.emptyNameError=this.querySelector("#empty-name-error"),this.eventCreateError=this.querySelector("#event-create-error"),this.personCountError=this.querySelector("#person-count-error"),this.eventNameError=this.querySelector("#event-name-error"),this.createButton=this.querySelector("#create-button"),this.eventName=this.querySelector("#event-name"),this.creating=this.querySelector("#creating"),this.oeffentlicherName=this.querySelector("#oeffentlicher-name"),this.oeffentlich=this.querySelector("#oeffentlich"),this.oeffentlichBox=this.querySelector("#oeffentlich-box"),this.oeffentlicherNameError=this.querySelector("#oeffentlicher-name-error"),this.eventNameDuplicate=this.querySelector("#event-name-duplicate"),this.accountCreationFailed=this.querySelector("#account-creation-failed"),this.personNameDuplicateError=this.querySelector("#person-name-duplicate-error"),this.createButton.addEventListener("click",this.createEvent.bind(this)),this.oeffentlich.addEventListener("change",()=>{this.oeffentlichBox.style.display=this.oeffentlich.checked?"block":"none"}),this.eventName.addEventListener("change",()=>{this.oeffentlicherNameManuell||(this.oeffentlicherName.value=this.eventName.value)}),this.oeffentlicherName.addEventListener("change",()=>{this.oeffentlicherNameManuell=!0}),this.subscription=this.store.subscribe(null,e=>this.applyStoreState(e)),this.applyStoreState(this.store.state)}createEvent(){return F(this,void 0,void 0,(function*(){let e=this.eventName.value,t=this.personenListe.personen;this.eventNameError.style.display=e?"none":"block";let n=t.length>=2;this.personCountError.style.display=n?"none":"block";let r=t.some(e=>!e);this.emptyNameError.style.display=r?"block":"none";let o=this.oeffentlich.checked&&(!this.oeffentlicherName.value||!/^[a-z0-9]+$/.test(this.oeffentlicherName.value));this.oeffentlicherNameError.style.display=o?"block":"none";let i=t.some((e,n)=>t.indexOf(e)!=n);this.personNameDuplicateError.style.display=i?"block":"none",!e||!n||r||o||i||(yield this.accountActionCreator.ensureAccount())&&(yield this.kontokorrentsActionCreator.kontokorrentErstellen(this.kontokorrentId,this.eventName.value,this.oeffentlich.checked?this.oeffentlicherName.value:null,t))&&this.routingActionCreator.navigateKontokorrent(this.kontokorrentId)}))}applyStoreState(e){this.creating.style.display=e.kontokorrents.creating||e.account.accountCreating?"block":"none",this.eventCreateError.style.display=e.kontokorrents.creationFailed?"block":"none",this.eventNameDuplicate.style.display=e.kontokorrents.creationFailed&&e.kontokorrents.creationFailed.exists?"block":"none",this.accountCreationFailed.style.display=!e.account.accountCreating&&e.account.accountCreationFailed?"block":"none"}disconnectedCallback(){this.subscription()}}customElements.define("app-create-event",U);var R=n(14),Y=n.n(R),G=n(15),J=n.n(G);n(28);function X(e){var t,n,r,o,i,a=""+(t=2,n=e.toString(),r=n.indexOf("E"),o=n.indexOf("e"),i=0,o>-1?(i=parseFloat(n.substring(o+1)),n=n.substring(0,o)):r>-1&&(i=parseFloat(n.substring(r+1)),n=n.substring(0,r)),Number(Math.round(Number(n+"e"+(i+t)))+"e-"+t)),s=a.toString().indexOf(".");return-1!=s&&1==a.toString().length-(s+1)&&(a+="0"),a}class Q extends HTMLElement{constructor(){super(),this.innerHTML=J.a,this.personNameElement=this.querySelector('[data-ref="person-name"]'),this.balanceTextElement=this.querySelector('[data-ref="balance-text"]'),this.balanceContainerElement=this.querySelector('[data-ref="balance-container"]'),this.barElement=this.querySelector('[data-ref="bar"]')}connectedCallback(){requestAnimationFrame(()=>{this.barElement.style.transform="scaleY(0)",this.updatesStyle()})}disconnectedCallback(){}attributeChangedCallback(){this.updateAttributes()}updateAttributes(){this.personName=this.getAttribute("person-name"),this.balance=parseFloat(this.getAttribute("balance")),this.balanceRange=Math.max(2,parseFloat(this.getAttribute("balance-range"))),this.updatesStyle()}static get observedAttributes(){return["person-name","balance","balance-range"]}updatesStyle(){requestAnimationFrame(()=>{this.personNameElement.innerText=this.personName,this.balanceTextElement.innerText=X(this.balance);let e=Math.sign(this.balance)*Math.abs(this.balance)/this.balanceRange,t=1.9*e;this.barElement.style.transform=`scaleY(${e})`,this.balanceContainerElement.style.transform=Math.sign(this.balance)<0?`translateY(calc(${t}em - 150%))`:`translateY(calc(${t}em + 50%))`,e>0?(this.barElement.classList.add("balance-anzeige-element__bar--negative"),this.barElement.classList.remove("balance-anzeige-element__bar--positive")):(this.barElement.classList.remove("balance-anzeige-element__bar--negative"),this.barElement.classList.add("balance-anzeige-element__bar--positive"))})}}customElements.define("balance-anzeige-element",Q);var $=n(16),V=n.n($);class Z extends HTMLElement{constructor(){super(),this.innerHTML=V.a}connectedCallback(){}disconnectedCallback(){}setBalance(e){this.personen=e,this.balanceRange=Math.max(...Object.values(e).map(e=>Math.abs(e.balance))),this.updatesStyle()}updatesStyle(){p(this,this.personen,e=>e.id,e=>new Q,(e,t)=>{e.setAttribute("person-name",t.name),e.setAttribute("balance",""+t.balance),e.setAttribute("balance-range",""+this.balanceRange)})}}customElements.define("balance-anzeige",Z);var ee=n(17),te=n.n(ee),ne=(n(29),n(18)),re=n.n(ne);n(30);class oe extends HTMLElement{constructor(){super(),this.attributeStore={beschreibung:null,bezahlendePerson:null,empfaenger:null,wert:null},this.innerHTML=re.a,this.beschreibungElement=this.querySelector('[data-ref="beschreibung"]'),this.bezahlendePersonElement=this.querySelector('[data-ref="bezahlende-person"]'),this.empfaengerElement=this.querySelector('[data-ref="empfaenger"]'),this.wertElement=this.querySelector('[data-ref="wert"]')}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(){this.updateAttributes()}checkChanged(e,t){let n=t();return this.attributeStore[e]!=n&&(this.attributeStore[e]=n,!0)}updateAttributes(){[this.checkChanged("bezahlendePerson",()=>this.getAttribute("bezahlende-person")),this.checkChanged("beschreibung",()=>this.getAttribute("beschreibung")),this.checkChanged("wert",()=>parseFloat(this.getAttribute("wert"))),this.checkChanged("empfaenger",()=>this.getAttribute("empfaenger"))].some(e=>e)&&this.updatesStyle()}static get observedAttributes(){return["beschreibung","bezahlende-person","wert","empfaenger"]}updatesStyle(){this.beschreibungElement.innerText=this.attributeStore.beschreibung,this.bezahlendePersonElement.innerText=this.attributeStore.bezahlendePerson,this.wertElement.innerText=X(this.attributeStore.wert),this.empfaengerElement.innerText=this.attributeStore.empfaenger}}function ie(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ae(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function se(e){ae(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function ce(e){ae(1,arguments);var t=se(e);return t.setHours(0,0,0,0),t}function ue(e,t){ae(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:ie(o),a=null==n.weekStartsOn?i:ie(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=se(e),c=s.getDay(),u=(c<a?7:0)+c-a;return s.setDate(s.getDate()-u),s.setHours(0,0,0,0),s}function le(e){ae(1,arguments);var t=se(e);return!isNaN(t)}customElements.define("bezahlung-card",oe);var de={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function he(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var fe={date:he({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:he({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:he({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ge={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function pe(e){return function(t,n){var r,o=n||{};if("formatting"===(o.context?String(o.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=o.width?String(o.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var s=e.defaultWidth,c=o.width?String(o.width):e.defaultWidth;r=e.values[c]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function me(e){return function(t,n){var r=String(t),o=n||{},i=r.match(e.matchPattern);if(!i)return null;var a=i[0],s=r.match(e.parsePattern);if(!s)return null;var c=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:c=o.valueCallback?o.valueCallback(c):c,rest:r.slice(a.length)}}}function be(e){return function(t,n){var r=String(t),o=n||{},i=o.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=r.match(a);if(!s)return null;var c,u=s[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth];return c="[object Array]"===Object.prototype.toString.call(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(l,(function(e){return e.test(u)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(l,(function(e){return e.test(u)})),c=e.valueCallback?e.valueCallback(c):c,{value:c=o.valueCallback?o.valueCallback(c):c,rest:r.slice(u.length)}}}var ke={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof de[e]?de[e]:1===t?de[e].one:de[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:fe,formatRelative:function(e,t,n,r){return ge[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:pe({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:pe({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:pe({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:pe({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:pe({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:me({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:be({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:be({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:be({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:be({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:be({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function ve(e,t){ae(2,arguments);var n=se(e).getTime(),r=ie(t);return new Date(n+r)}function ye(e,t){ae(2,arguments);var n=ie(t);return ve(e,-n)}function we(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Se={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return we("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):we(n+1,2)},d:function(e,t){return we(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.toUpperCase();case"aaaaa":return n[0];case"aaaa":default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return we(e.getUTCHours()%12||12,t.length)},H:function(e,t){return we(e.getUTCHours(),t.length)},m:function(e,t){return we(e.getUTCMinutes(),t.length)},s:function(e,t){return we(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return we(Math.floor(r*Math.pow(10,n-3)),t.length)}};function Ce(e){ae(1,arguments);var t=1,n=se(e),r=n.getUTCDay(),o=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-o),n.setUTCHours(0,0,0,0),n}function Ee(e){ae(1,arguments);var t=se(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var o=Ce(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=Ce(i);return t.getTime()>=o.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Me(e){ae(1,arguments);var t=Ee(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=Ce(n);return r}function xe(e,t){ae(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:ie(o),a=null==n.weekStartsOn?i:ie(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=se(e),c=s.getUTCDay(),u=(c<a?7:0)+c-a;return s.setUTCDate(s.getUTCDate()-u),s.setUTCHours(0,0,0,0),s}function ze(e,t){ae(1,arguments);var n=se(e,t),r=n.getUTCFullYear(),o=t||{},i=o.locale,a=i&&i.options&&i.options.firstWeekContainsDate,s=null==a?1:ie(a),c=null==o.firstWeekContainsDate?s:ie(o.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,c),u.setUTCHours(0,0,0,0);var l=xe(u,t),d=new Date(0);d.setUTCFullYear(r,0,c),d.setUTCHours(0,0,0,0);var h=xe(d,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function Ae(e,t){ae(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.firstWeekContainsDate,i=null==o?1:ie(o),a=null==n.firstWeekContainsDate?i:ie(n.firstWeekContainsDate),s=ze(e,t),c=new Date(0);c.setUTCFullYear(s,0,a),c.setUTCHours(0,0,0,0);var u=xe(c,t);return u}var Le="midnight",Oe="noon",Te="morning",Pe="afternoon",je="evening",Ie="night";function Ne(e,t){var n=e>0?"-":"+",r=Math.abs(e),o=Math.floor(r/60),i=r%60;if(0===i)return n+String(o);var a=t||"";return n+String(o)+a+we(i,2)}function De(e,t){return e%60==0?(e>0?"-":"+")+we(Math.abs(e)/60,2):Ke(e,t)}function Ke(e,t){var n=t||"",r=e>0?"-":"+",o=Math.abs(e);return r+we(Math.floor(o/60),2)+n+we(o%60,2)}var _e={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Se.y(e,t)},Y:function(e,t,n,r){var o=ze(e,r),i=o>0?o:1-o;return"YY"===t?we(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):we(i,t.length)},R:function(e,t){return we(Ee(e),t.length)},u:function(e,t){return we(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return we(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return we(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Se.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return we(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var o=function(e,t){ae(1,arguments);var n=se(e),r=xe(n,t).getTime()-Ae(n,t).getTime();return Math.round(r/6048e5)+1}(e,r);return"wo"===t?n.ordinalNumber(o,{unit:"week"}):we(o,t.length)},I:function(e,t,n){var r=function(e){ae(1,arguments);var t=se(e),n=Ce(t).getTime()-Me(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):we(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Se.d(e,t)},D:function(e,t,n){var r=function(e){ae(1,arguments);var t=se(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),o=n-r;return Math.floor(o/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):we(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var o=e.getUTCDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return we(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var o=e.getUTCDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return we(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),o=0===r?7:r;switch(t){case"i":return String(o);case"ii":return we(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,o=e.getUTCHours();switch(r=12===o?Oe:0===o?Le:o/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,o=e.getUTCHours();switch(r=o>=17?je:o>=12?Pe:o>=4?Te:Ie,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Se.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Se.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):we(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):we(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Se.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Se.s(e,t)},S:function(e,t){return Se.S(e,t)},X:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();if(0===o)return"Z";switch(t){case"X":return De(o);case"XXXX":case"XX":return Ke(o);case"XXXXX":case"XXX":default:return Ke(o,":")}},x:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return De(o);case"xxxx":case"xx":return Ke(o);case"xxxxx":case"xxx":default:return Ke(o,":")}},O:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ne(o,":");case"OOOO":default:return"GMT"+Ke(o,":")}},z:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ne(o,":");case"zzzz":default:return"GMT"+Ke(o,":")}},t:function(e,t,n,r){var o=r._originalDate||e;return we(Math.floor(o.getTime()/1e3),t.length)},T:function(e,t,n,r){return we((r._originalDate||e).getTime(),t.length)}};function qe(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function He(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var We={p:He,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),o=r[1],i=r[2];if(!i)return qe(e,t);switch(o){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",qe(o,t)).replace("{{time}}",He(i,t))}};function Be(e){return e.getTime()%6e4}function Fe(e){var t=new Date(e.getTime()),n=Math.ceil(t.getTimezoneOffset());return t.setSeconds(0,0),6e4*n+(n>0?(6e4+Be(t))%6e4:Be(t))}var Ue=["D","DD"],Re=["YY","YYYY"];function Ye(e){return-1!==Ue.indexOf(e)}function Ge(e){return-1!==Re.indexOf(e)}function Je(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Xe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Qe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$e=/^'([^]*?)'?$/,Ve=/''/g,Ze=/[a-zA-Z]/;function et(e,t,n){ae(2,arguments);var r=String(t),o=n||{},i=o.locale||ke,a=i.options&&i.options.firstWeekContainsDate,s=null==a?1:ie(a),c=null==o.firstWeekContainsDate?s:ie(o.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=i.options&&i.options.weekStartsOn,l=null==u?0:ie(u),d=null==o.weekStartsOn?l:ie(o.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var h=se(e);if(!le(h))throw new RangeError("Invalid time value");var f=Fe(h),g=ye(h,f),p={firstWeekContainsDate:c,weekStartsOn:d,locale:i,_originalDate:h},m=r.match(Qe).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,We[t])(e,i.formatLong,p):e})).join("").match(Xe).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return tt(n);var a=_e[r];if(a)return!o.useAdditionalWeekYearTokens&&Ge(n)&&Je(n,t,e),!o.useAdditionalDayOfYearTokens&&Ye(n)&&Je(n,t,e),a(g,n,i.localize,p);if(r.match(Ze))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return m}function tt(e){return e.match($e)[1].replace(Ve,"'")}function nt(e,t){const n=new Map;return e.forEach(e=>{const r=e[t],o=n.get(r);o?o.push(e):n.set(r,[e])}),n}var rt=n(19),ot=n.n(rt);class it extends HTMLElement{constructor(){super(),this.innerHTML=ot.a,this.container=this.querySelector('[data-ref="container"]'),this.titleElement=this.querySelector('[data-ref="title"]')}connectedCallback(){}disconnectedCallback(){}setBezahlungen(e){p(this.container,e,e=>e.id,e=>new oe,(e,t)=>{e.setAttribute("beschreibung",t.beschreibung),e.setAttribute("wert",""+t.wert),e.setAttribute("bezahlende-person",t.bezahlendePersonName),e.setAttribute("empfaenger",t.empfaenger)})}set title(e){this.titleElement.innerText=e}}customElements.define("bezahlungen-group",it);var at={lessThanXSeconds:{standalone:{one:"weniger als eine Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als einer Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"eine Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"einer Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als eine Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als einer Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"eine Minute",other:"{{count}} Minuten"},withPreposition:{one:"einer Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa eine Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa einer Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"eine Stunde",other:"{{count}} Stunden"},withPreposition:{one:"einer Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"ein Tag",other:"{{count}} Tage"},withPreposition:{one:"einem Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa ein Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa einem Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"ein Woche",other:"{{count}} Wochen"},withPreposition:{one:"einem Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa ein Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa einem Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"ein Monat",other:"{{count}} Monate"},withPreposition:{one:"einem Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa ein Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa einem Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"ein Jahr",other:"{{count}} Jahre"},withPreposition:{one:"einem Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als ein Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als einem Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast ein Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast einem Jahr",other:"fast {{count}} Jahren"}}};var st={date:he({formats:{full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM. y",short:"dd.MM.y"},defaultWidth:"full"}),time:he({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:he({formats:{full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},ct={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"};var ut={code:"de",formatDistance:function(e,t,n){var r,o=(n=n||{}).addSuffix?at[e].withPreposition:at[e].standalone;return r="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:"vor "+r:r},formatLong:st,formatRelative:function(e,t,n,r){return ct[e]},localize:{ordinalNumber:function(e,t){return Number(e)+"."},era:pe({values:{narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},defaultWidth:"wide"}),quarter:pe({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:pe({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},defaultWidth:"wide"}),day:pe({values:{narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},defaultWidth:"wide"}),dayPeriod:pe({values:{narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},defaultWidth:"wide",formattingValues:{narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:me({matchPattern:/^(\d+)(\.)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:be({matchPatterns:{narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^v/i,/^n/i]},defaultParseWidth:"any"}),quarter:be({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:be({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mär|apr|mai|jun|jul|aug|sep|okt|nov|dez)/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:be({matchPatterns:{narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:be({matchPatterns:{narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},defaultMatchWidth:"wide",parsePatterns:{any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};class lt extends HTMLElement{constructor(){super(),this.minTage=3,this.minEintraege=20,this.all=!1,this.innerHTML=te.a,this.bezahlungenContainer=this.querySelector("#bezahlungen-container"),this.showMoreButton=this.querySelector("#show-more"),this.showMoreClick=this.showMoreClick.bind(this)}connectedCallback(){this.showMoreButton.addEventListener("click",this.showMoreClick)}disconnectedCallback(){}setShowMoreButtonDisplay(){this.bezahlungen&&(this.showMoreButton.style.display=this.bezahlungen.length>this.anzahlEintraege?"inline":"none")}showMoreClick(){this.anzahlEintraege+=20,this.setShowMoreButtonDisplay()}formatEmpfaenger(e,t){return e.empfaengerIds.length==t.length?"alle":e.empfaengerIds.map(e=>t.find(t=>t.id==e).name).join(", ")}setBezahlungen(e,t){this.bezahlungen=e,this.personen=t,this.setShowMoreButtonDisplay(),this.render()}render(){let e=this.bezahlungen.sort((e,t)=>+t.zeitpunkt-+e.zeitpunkt),t=e;this.all||(t=e.filter(e=>e.zeitpunkt>function(e,t){ae(2,arguments);var n=se(e),r=ie(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}(ce(Date.now()),-this.minTage)),t.length<this.minEintraege&&(t=e.slice(0,this.minEintraege)));let n=t.map(e=>({bezahlendePersonName:this.personen.find(t=>t.id==e.bezahlendePersonId).name,wert:e.wert,beschreibung:e.beschreibung,empfaenger:this.formatEmpfaenger(e,this.personen),tag:+ce(e.zeitpunkt),id:e.id,woche:+ue(e.zeitpunkt)})),r=!1,o=Array.of(...nt(n,"tag").entries());o.reduce((e,t)=>e+t[1].length,0)/o.length<2&&(o=Array.of(...nt(n,"woche").entries()),r=!0);let i=o.sort((e,t)=>t[0]-e[0]);p(this.bezahlungenContainer,i,e=>""+e[0],()=>new it,(e,t)=>{e.setBezahlungen(t[1]),e.title=r?this.formatWeek(new Date(t[0])):et(new Date(t[0]),"EEEEEE, d.MM.yyyy",{locale:ut})})}get anzahlEintraege(){return this.minEintraege}set anzahlEintraege(e){this.minEintraege=e,this.render()}formatWeek(e){let t,n=function(e,t){ae(1,arguments);var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:ie(o),a=null==n.weekStartsOn?i:ie(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=se(e),c=s.getDay(),u=6+(c<a?-7:0)-(c-a);return s.setDate(s.getDate()+u),s.setHours(23,59,59,999),s}(e);return t=n.getMonth()==e.getMonth()?`${et(e,"d.",{locale:ut})} - ${et(n,"d. MMMM",{locale:ut})}`:`${et(e,"d. MMMM",{locale:ut})} - ${et(n,"d. MMMM",{locale:ut})}`,t}}customElements.define("bezahlungen-view",lt);n(31);class dt extends HTMLElement{constructor(){super(),this.innerHTML=Y.a,this.appBar=this.querySelector("app-bar"),this.balanceAnzeige=this.querySelector("#balance-anzeige"),this.bezahlungenView=this.querySelector("#bezahlungen-view"),this.kontokorrentSpinner=this.querySelector("#spinner")}addServices(e){this.store=e.store,this.routingActionCreator=e.routingActionCreator,this.accountActionCreator=e.accountActionCreator,this.kontokorrentsActionCreator=e.kontokorrentsActionCreator,this.appBar.addServices(e)}connectedCallback(){this.subscription=this.store.subscribe(null,e=>this.applyStoreState(e)),this.applyStoreState(this.store.state)}applyStoreState(e){this.kontokorrent=e.kontokorrents.kontokorrents[e.kontokorrents.activeKontokorrentId],this.kontokorrent&&(document.title=this.kontokorrent.name+" - Kontokorrent",this.kontokorrent.personen&&(this.balanceAnzeige.setBalance(this.kontokorrent.personen),this.bezahlungenView.setBezahlungen(this.kontokorrent.bezahlungen,this.kontokorrent.personen)),this.kontokorrentSpinner.style.display=this.kontokorrent.synchronisieren?"flex":"none")}setKontokorrentId(e){this.kontokorrentsActionCreator.kontokorrentOeffnen(e)}disconnectedCallback(){this.subscription()}}customElements.define("kontokorrent-page",dt);var ht,ft=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e.Login="login",e.Info="info",e.Home="",e.FeaturesRequired="features-required",e.Kontokorrents="kontokorrents",e.CreateEvent="create-event"}(ht||(ht={}));class gt extends EventTarget{constructor(e){super(),this.store=e}setServiceLocator(e){this.serviceLocator=e}resolve(e,t,r){return ft(this,void 0,void 0,(function*(){switch(t in ht&&this.dispatchEvent(new CustomEvent("routedTo",{detail:{currentRoute:t}})),t){case ht.Info:const{Info:e}=yield n.e(1).then(n.bind(null,54));let t=new e;return t.addServices(this.serviceLocator),t;case ht.FeaturesRequired:{let e=new A;return e.addServices(this.serviceLocator),e}case ht.Login:{let e=new j;return e.addServices(this.serviceLocator),e}case ht.CreateEvent:{let e=new U;return e.addServices(this.serviceLocator),e}}if(!this.store.state.account.accountCreated)return!1;let e=/^kontokorrents\/([a-zA-Z0-9\-]+)$/.exec(t);if(e){let t=e[1],n=new dt;return n.addServices(this.serviceLocator),n.setKontokorrentId(t),n}let r=new E;return r.addServices(this.serviceLocator),r}))}}class pt extends class{constructor(e){this.subscriptions=[],this.reducerSubscriptions=[],this.state=e()}subscribe(e,t){let n={area:e,call:t};return this.subscriptions.push(n),()=>{this.subscriptions.splice(this.subscriptions.indexOf(n),1)}}addReducer(e,t){this.reducerSubscriptions.push({area:e,reducer:t})}dispatch(e){let t=[];for(let n of this.reducerSubscriptions){let r;r=n.area?e=>{this.state[n.area]=e(this.state[n.area]),t.push(n.area)}:e=>{this.state=e(this.state),t.push("")};try{n.reducer.onDispatch(e,r)}catch(t){console.error(`Error while dispatching ${e.type}.`,t)}}if(t.length)for(let n of this.subscriptions)if(!n.area||t.indexOf(n.area)>-1)try{n.call(this.state)}catch(t){console.error(`Error while updating on ${n.area||"global"} after ${e.type}.`,t)}}}{}var mt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class bt{constructor(e,t,n,r,o){this.store=e,this.routingActionCreator=t,this.accountActionCreator=n,this.kontokorrentsActionCreator=r,this.router=o}initializeApplication(){return mt(this,void 0,void 0,(function*(){if(!z().allPassed)return this.router.run(),void this.routingActionCreator.navigateFeaturesRequired();let e=yield this.accountActionCreator.initializeAccount();this.router.run(),e?yield this.kontokorrentsActionCreator.syncKontokorrentListe():this.routingActionCreator.navigateLogin()}))}}class kt{constructor(e){this.router=e}navigateHome(){this.router.navigate(ht.Home,null)}navigateLogin(){this.router.navigate(ht.Login,null)}navigateFeaturesRequired(){this.router.navigate(ht.FeaturesRequired,null)}navigate(e){this.router.navigate(e,null)}navigateKontokorrent(e,t){this.router.navigate(`${ht.Kontokorrents}/${e}`,null,t)}}class vt{constructor(e,t,n,r){this.store=e,this.routingActionCreator=t,this.accountActionCreator=n,this.kontokorrentsActionCreator=r}}class yt{set(e){localStorage.setItem("account_info",JSON.stringify(e))}get(){let e=localStorage.getItem("account_info");return null==e?null:JSON.parse(e)}clear(){localStorage.removeItem("account_info"),localStorage.removeItem("access_token_anonymous"),localStorage.removeItem("access_token_google")}}var wt,St=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};function Ct(e,t,n){return St(this,void 0,void 0,(function*(){let r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)};return n&&(r.headers=Object.assign(Object.assign({},r.headers),{Authorization:"Bearer "+n})),yield fetch(e,r)}))}!function(e){e.google="google",e.anonym="anonym"}(wt||(wt={}));class Et{constructor(e){this.networkError=e}}var Mt=n(1);class xt{}let zt="https://kontokorrent.azurewebsites.net";zt="https://kontokorrent-v2.azurewebsites.net";var At=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const Lt={API_URL:zt}.API_URL;class Ot{constructor(e){this.accountInfoStore=e}neuerBenutzer(e,t){return At(this,void 0,void 0,(function*(){try{return(yield Ct(Lt+"/api/v2/accounts",{id:e,secret:t})).ok?{success:!0}:{success:!1}}catch(e){return{success:!1}}}))}getUserInfo(){return At(this,void 0,void 0,(function*(){let e=yield fetch(Lt+"/api/v2/userinfo",{headers:yield this.getAuthHeader()});return yield e.json()}))}getAuthHeader(){return At(this,void 0,void 0,(function*(){return{Authorization:"Bearer "+(yield this.getAccessToken())}}))}kontokorrentHinzufuegen(e,t){return At(this,void 0,void 0,(function*(){let n="";n=e?"oeffentlicherName="+encodeURIComponent(e):"einladungsCode="+encodeURIComponent(t);let r=yield this.getAuthHeader(),o=yield fetch(`${Lt}/api/v2/kontokorrents?${n}`,{method:"PUT",headers:r});return 404==o.status?null:yield o.json()}))}kontokorrentsAuflisten(){return At(this,void 0,void 0,(function*(){let e=yield fetch(Lt+"/api/v2/kontokorrents",{headers:yield this.getAuthHeader()});if(!e.ok)throw new xt;return yield e.json()}))}neuerKontokorrent(e){return At(this,void 0,void 0,(function*(){let t=yield Ct(Lt+"/api/v2/kontokorrents",e,yield this.getAccessToken());return 422==t.status?{success:!1,exists:!0}:t.ok?{success:!0}:{success:!1}}))}getAktionen(e,t){return At(this,void 0,void 0,(function*(){let n=t?"?ab="+t:"",r=yield fetch(`${Lt}/api/v2/kontokorrents/${e}/aktionen${n}`,{headers:yield this.getAuthHeader()});if(404==r.status)return{success:!1,notfound:!0};if(r.ok){let e=yield r.json();for(let t of e)t.bezahlung&&(t.bezahlung.zeitpunkt=new Date(t.bezahlung.zeitpunkt));return{success:!0,aktionen:e}}}))}getAccessToken(){return At(this,void 0,void 0,(function*(){let e=this.accountInfoStore.get();if(null==e)throw new Error("Keine Account Information gespeichert.");let t=localStorage.getItem("access_token_anonymous");if(null!=t){let{token:e,expires:n}=JSON.parse(t);if(e&&n&&n>=+new Date)return e}if(e.type!=wt.anonym)throw e.type==wt.google?new Mt.a:new Error(`Account Typ ${e.type} unbekannt`);try{let t=yield Ct(Lt+"/api/v2/token",{id:e.id,secret:e.secret});if(!t.ok)throw new Et(!1);let n=yield t.json();return localStorage.setItem("access_token_anonymous",JSON.stringify(n)),n.token}catch(e){throw new Et(!0)}}))}}var Tt,Pt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e.AccountCreating="AccountCreating",e.AccountCreationFailed="AccountCreationFailed",e.AccountCreated="AccountCreated",e.AccountInitialized="AccountInitialized",e.LoggedOut="LoggedOut",e.LoginExpired="LoginExpired"}(Tt||(Tt={}));class jt{constructor(){this.type=Tt.AccountCreating}}class It{constructor(){this.type=Tt.AccountCreationFailed}}class Nt{constructor(e){this.info=e,this.type=Tt.AccountCreated}}class Dt{constructor(e){this.info=e,this.type=Tt.AccountInitialized}}class Kt{constructor(){this.type=Tt.LoggedOut}}class _t{constructor(){this.type=Tt.LoginExpired}}class qt{constructor(e,t,n,r,o){this.store=e,this.apiClient=t,this.accountInfoStore=n,this.routingActionCreator=r,this.db=o}initializeAccount(){let e=this.accountInfoStore.get();return!!this.accountInfoStore.get()&&(this.store.dispatch(new Dt(e)),this.getUserInfo(),!0)}getUserInfo(){return Pt(this,void 0,void 0,(function*(){try{yield this.apiClient.getUserInfo()}catch(e){if(e instanceof Et){let t=this.accountInfoStore.get();e.networkError||t.type!=wt.anonym||(this.accountInfoStore.clear(),window.location.reload())}else e instanceof Mt.a&&this.store.dispatch(new _t)}}))}ensureAccount(){return Pt(this,void 0,void 0,(function*(){if(!this.store.state.account.accountCreated){let e={id:Object(B.a)(),secret:Object(B.a)(),type:wt.anonym};this.store.dispatch(new jt);let t=yield this.apiClient.neuerBenutzer(e.id,e.secret);return t.success?(this.store.dispatch(new Nt(e)),this.accountInfoStore.set(e)):this.store.dispatch(new It),t.success}return!0}))}logout(){return Pt(this,void 0,void 0,(function*(){this.accountInfoStore.clear(),yield this.db.clear(),this.store.dispatch(new Kt),this.routingActionCreator.navigateLogin()}))}}var Ht=n(0);class Wt{onDispatch(e,t){switch(e.type){case Tt.AccountCreating:t(e=>Object.assign(Object.assign({},e),{accountCreating:!0,accountCreationFailed:!1}));break;case Tt.AccountCreated:t(t=>Object.assign(Object.assign({},t),{accountCreating:!1,accountCreated:!0,accountInfo:e.info}));break;case Tt.AccountCreationFailed:t(e=>Object.assign(Object.assign({},e),{accountCreationFailed:!0,accountCreating:!1,accountCreated:!1}));break;case Tt.AccountInitialized:t(t=>Object.assign(Object.assign({},t),{accountCreated:!0,accountInfo:e.info}));break;case Tt.LoggedOut:t(e=>Object.assign(Object.assign({},e),{accountCreated:!1}));break;case Tt.LoginExpired:t(e=>Object.assign(Object.assign({},e),{loginExpired:!0}));break;case Ht.b.KontokorrentListeLadenFailed:e.interactionRequired&&t(e=>Object.assign(Object.assign({},e),{loginExpired:!0}))}}}class Bt{onDispatch(e,t){switch(e.type){case Ht.b.KontokorrentListeLaden:t(e=>Object.assign(Object.assign({},e),{listeLaden:!0}));break;case Ht.b.KontokorrentListeLadenFailed:t(e=>Object.assign(Object.assign({},e),{listeLaden:!1}));break;case Ht.b.KontokorrentListe:t(t=>Object.assign(Object.assign({},t),{kontokorrents:this.extendMap(t.kontokorrents,e.kontokorrents)}));break;case Ht.b.KontokorrentHinzufuegen:t(e=>Object.assign(Object.assign({},e),{hinzufuegen:!0}));break;case Ht.b.KontokorrentHinzufuegenFailed:t(t=>Object.assign(Object.assign({},t),{hinzufuegen:!1,hinzufuegenFailed:{kontokorrentNotFound:e.notFound}}));break;case Ht.b.KontokorrentHinzufuegenSuccess:t(t=>Object.assign(Object.assign({},t),{hinzufuegen:!1,kontokorrents:this.extendMap(t.kontokorrents,e.kontokorrents)}));case Ht.b.KontokorrentCreating:t(e=>Object.assign(Object.assign({},e),{creating:!0,creationFailed:null}));break;case Ht.b.KontokorrentCreationFailed:t(t=>Object.assign(Object.assign({},t),{creating:!1,creationFailed:{exists:e.exists}}));break;case Ht.b.KontokorrentCreated:t(t=>Object.assign(Object.assign({},t),{creating:!1,kontokorrents:Object.assign(Object.assign({},t.kontokorrents),{[e.kontokorrent.id]:{id:e.kontokorrent.id,name:e.kontokorrent.name,synchronisieren:!1,personen:e.kontokorrent.personen.map(e=>Object.assign({balance:0},e)),bezahlungen:[]}})}));break;case Ht.b.KontokorrentGeoeffnet:t(t=>Object.assign(Object.assign({},t),{activeKontokorrentId:e.id}));break;case Ht.b.KontokorrentBezahlungen:t(t=>Object.assign(Object.assign({},t),{kontokorrents:Object.assign(Object.assign({},t.kontokorrents),{[e.kontokorrentId]:Object.assign(Object.assign({},t.kontokorrents[e.kontokorrentId]),{bezahlungen:e.bezahlungen})})}));break;case Ht.b.KontokorrentSynchronisieren:t(t=>Object.assign(Object.assign({},t),{kontokorrents:Object.assign(Object.assign({},t.kontokorrents),{[e.kontokorrentId]:Object.assign(Object.assign({},t.kontokorrents[e.kontokorrentId]),{synchronisieren:!0})})}));break;case Ht.b.KontokorrentSynchronisiert:t(t=>Object.assign(Object.assign({},t),{kontokorrents:Object.assign(Object.assign({},t.kontokorrents),{[e.kontokorrentId]:Object.assign(Object.assign({},t.kontokorrents[e.kontokorrentId]),{synchronisieren:!1})})}));break;case Ht.b.KontokorrentBalanceAktualisiert:t(t=>Object.assign(Object.assign({},t),{kontokorrents:Object.assign(Object.assign({},t.kontokorrents),{[e.kontokorrentId]:Object.assign(Object.assign({},t.kontokorrents[e.kontokorrentId]),{personen:t.kontokorrents[e.kontokorrentId].personen.map(t=>Object.assign(Object.assign({},t),{balance:e.balance[t.id]}))})})}));break;case Ht.b.LoginPageGeoeffnet:t(e=>Object.assign(Object.assign({},e),{hinzufuegen:!1,hinzufuegenFailed:null}));break;case Tt.LoggedOut:t(e=>Object.assign(Object.assign({},e),{activeKontokorrentId:null,kontokorrents:{}}))}}extendMap(e,t){let n={};for(let r of t){let t=Object.assign(Object.assign(Object.assign(Object.assign({},r),{synchronisieren:!1,bezahlungen:[]}),e[r.id]),{personen:r.personen.map(t=>{var n,o;let i=null===(o=null===(n=e[r.id])||void 0===n?void 0:n.personen)||void 0===o?void 0:o.find(e=>e.id==t.id);return Object.assign(Object.assign(Object.assign({},t),{balance:0}),i)})});n[r.id]=t}return n}}n(33),n(34),n.p;var Ft=n(22),Ut=n.n(Ft);let Rt,Yt;const Gt=new WeakMap,Jt=new WeakMap,Xt=new WeakMap,Qt=new WeakMap,$t=new WeakMap;let Vt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Jt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Xt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Zt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Yt||(Yt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(nn(this),t),tn(Gt.get(this))}:function(...t){return tn(e.apply(nn(this),t))}:function(t,...n){const r=e.call(nn(this),t,...n);return Xt.set(r,t.sort?t.sort():[t]),tn(r)}}function en(e){return"function"==typeof e?Zt(e):(e instanceof IDBTransaction&&function(e){if(Jt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});Jt.set(e,t)}(e),t=e,(Rt||(Rt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Vt):e);var t}function tn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(tn(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Gt.set(t,e)}).catch(()=>{}),$t.set(t,e),t}(e);if(Qt.has(e))return Qt.get(e);const t=en(e);return t!==e&&(Qt.set(e,t),$t.set(t,e)),t}const nn=e=>$t.get(e);const rn=["get","getKey","getAll","getAllKeys","count"],on=["put","add","delete","clear"],an=new Map;function sn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(an.get(t))return an.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=on.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!rn.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let a=i.store;r&&(a=a.index(t.shift()));const s=await a[n](...t);return o&&await i.done,s};return an.set(t,i),i}Vt=(e=>({...e,get:(t,n,r)=>sn(t,n)||e.get(t,n,r),has:(t,n)=>!!sn(t,n)||e.has(t,n)}))(Vt);var cn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class un{withInitialized(e){return cn(this,void 0,void 0,(function*(){let t=yield function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(e,t),s=tn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(tn(a.result),e.oldVersion,e.newVersion,tn(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),s.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",()=>o())}).catch(()=>{}),s}("kontokorrent-db",3,{upgrade(e,t,n){if(t<1){e.createObjectStore("KontokorrentsStore",{keyPath:"id"}).createIndex("oeffentlicherName","oeffentlicherName")}if(t<2){e.createObjectStore("AppStateStore",{keyPath:"id"}).put({id:0,zuletztGesehenerKontokorrentId:null})}if(t<3){e.createObjectStore("AktionenStore",{keyPath:["laufendeNummer","kontokorrentId"]}).createIndex("kontokorrentId","kontokorrentId")}}});try{return yield e(t)}finally{t.close()}}))}getKontokorrents(){return cn(this,void 0,void 0,(function*(){return yield this.withInitialized(e=>cn(this,void 0,void 0,(function*(){return g(yield e.getAll("KontokorrentsStore"),e=>e.name)})))}))}addAktionen(e,t){return cn(this,void 0,void 0,(function*(){if(t.length)return yield this.withInitialized(n=>cn(this,void 0,void 0,(function*(){const r=n.transaction("AktionenStore","readwrite");let o=t.map(t=>Object.assign(Object.assign({},t),{kontokorrentId:e})).map(e=>r.store.add(e));yield Promise.all(o),yield r.done;const i=n.transaction("KontokorrentsStore","readwrite");let a=yield i.store.get(e),s=Math.max(...t.map(e=>e.laufendeNummer));a.laufendeNummer=s,yield i.store.put(a),yield i.done})))}))}getZuletztGesehenerKontokorrentId(){return cn(this,void 0,void 0,(function*(){return yield this.withInitialized(e=>cn(this,void 0,void 0,(function*(){let t=yield e.get("AppStateStore",0);if(t.zuletztGesehenerKontokorrentId)return t.zuletztGesehenerKontokorrentId;{let e=yield yield this.getKontokorrents();return e.length?e[0].id:null}})))}))}setZuletztGesehenerKontokorrentId(e){return cn(this,void 0,void 0,(function*(){return yield this.withInitialized(t=>cn(this,void 0,void 0,(function*(){let n=yield t.get("AppStateStore",0);n.zuletztGesehenerKontokorrentId=e,yield t.put("AppStateStore",n)})))}))}setKontokorrents(e){return cn(this,void 0,void 0,(function*(){return yield this.withInitialized(t=>cn(this,void 0,void 0,(function*(){let n=yield t.getAll("KontokorrentsStore");for(let r of n.filter(t=>!e.some(e=>t.id===e.id)))yield t.delete("KontokorrentsStore",r.id);let r=[];for(let o of e){let e=n.find(e=>e.id==o.id);e||r.push(o.id);let i=Object.assign(Object.assign({},e),{name:o.name,personen:o.personen,id:o.id,oeffentlicherName:o.oeffentlicherName});yield t.put("KontokorrentsStore",i)}return r})))}))}addKontokorrent(e){return cn(this,void 0,void 0,(function*(){return yield this.withInitialized(t=>cn(this,void 0,void 0,(function*(){(yield t.get("KontokorrentsStore",e.id))||(yield t.add("KontokorrentsStore",e))})))}))}getKontokorrent(e){return cn(this,void 0,void 0,(function*(){return yield this.withInitialized(t=>cn(this,void 0,void 0,(function*(){return yield t.get("KontokorrentsStore",e)})))}))}getPerOeffentlichName(e){return cn(this,void 0,void 0,(function*(){return yield this.withInitialized(t=>cn(this,void 0,void 0,(function*(){return yield t.getFromIndex("KontokorrentsStore","oeffentlicherName",e)})))}))}getAktionen(e){return cn(this,void 0,void 0,(function*(){return yield this.withInitialized(t=>cn(this,void 0,void 0,(function*(){return yield t.getAllFromIndex("AktionenStore","kontokorrentId",e)})))}))}clear(){return cn(this,void 0,void 0,(function*(){return yield this.withInitialized(e=>cn(this,void 0,void 0,(function*(){yield e.clear("AktionenStore"),yield e.clear("KontokorrentsStore"),yield e.put("AppStateStore",{id:0,zuletztGesehenerKontokorrentId:null})})))}))}}var ln=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};"serviceWorker"in navigator&&window.addEventListener("load",()=>ln(void 0,void 0,void 0,(function*(){try{yield Ut.a.register()}catch(e){console.error("ServiceWorker registration failed: ",e)}}))),function(){return ln(this,void 0,void 0,(function*(){const e=new pt(()=>({account:{accountCreated:!1,accountCreating:!1,accountCreationFailed:!1,loginExpired:!1,accountInfo:null},kontokorrents:{hinzufuegen:!1,hinzufuegenFailed:null,creating:!1,creationFailed:null,kontokorrents:{},listeLaden:!1,activeKontokorrentId:null}})),t=new gt(e),n=new r(t,new o),i=new un;e.addReducer("account",new Wt),e.addReducer("kontokorrents",new Bt);const a=new kt(n),s=new yt,c=new Ot(s),u=new qt(e,c,s,a,i),l=new Ht.a(e,c,a,i),d=new bt(e,a,u,l,n),h=new vt(e,a,u,l);t.setServiceLocator(h),yield d.initializeApplication()}))}().catch(e=>console.error(e))},function(e,t,n){"use strict";var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);function i(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"==typeof e&&a.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function(e,t,n){var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return l(r)}}]);
//# sourceMappingURL=d061054a6f30e6592634.bundle.js.map