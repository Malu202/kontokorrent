{"version":3,"sources":["webpack:///./src/components/convertLinks.ts","webpack:///./src/utils/ArrayToElementRenderer.ts","webpack:///./src/components/ui-components/popup/popup.ts","webpack:///./src/components/AppBar/AppBar.html","webpack:///./src/components/KontokorrentSelect/KontokorrentSelect.html","webpack:///./src/components/KontokorrentSelect/KontokorrentSelectList.html","webpack:///./src/components/KontokorrentSelect/KontokorrentSelectListEntry.html","webpack:///./src/components/KontokorrentSelect/KontokorrentSelectListEntry.ts","webpack:///./src/components/KontokorrentSelect/KontokorrentSelectList.ts","webpack:///./src/components/KontokorrentSelect/KontokorrentSelect.ts","webpack:///./src/components/AppBar/AppBar.ts","webpack:///./src/components/BezahlungEintragenPage/BezahlungEintragenPage.html","webpack:///./src/components/BezahlungEintragenPage/BezahlungEintragenPage.ts"],"names":["convertLinks","elements","routingActionCreator","forEach","e","addEventListener","ev","preventDefault","navigate","getAttribute","ArrayToElementRenderer","listElement","keySelector","createElement","this","keyToElement","Map","elementToKey","WeakMap","list","updateElement","keyCache","getKey","d","get","key","set","x","Array","from","children","el","data","find","i","removeChild","before","nextKeyToElement","t","childElement","firstElementChild","prepend","nextElementSibling","insertAdjacentElement","Popup","HTMLElement","super","popupShown","keyListener","bind","clickListener","updateStyles","hide","contains","event","document","removeEventListener","style","display","show","customElements","define","module","exports","innerHTML","name","querySelector","link","clickEvent","dispatchEvent","CustomEvent","detail","kontokorrent","id","bubbles","isActive","innerText","href","classList","toggle","_kontokorrents","kontokorrentsRenderer","k","li","appendChild","update","firstChild","_activeKontokorrentId","kontokorrents","sortBy","kontokorrentName","kontokorrentSelectList","addButton","popup","updateAttributes","stopPropagation","activeKontokorrentId","updatesStyle","length","activeKontokorrent","kontokorrentSelect","logoutDialog","body","add","accountActionCreator","logout","querySelectorAll","subscription","store","subscribe","state","applyStoreState","navigateLogin","Object","values","setAttribute","serviceLocator","kontokorrentsActionCreator","remove","AppBarTagName","BezahlungEintragenPage","zurueckLink","appBar","bezahlungActionCreator","addServices","s","bezahlungEintragenKontokorrentChanged","bezahlungEintragenGeoeffnet"],"mappings":"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","file":"2.b2519655ee1908e5e61b.bundle.js","sourcesContent":["import { RoutingActionCreator } from \"../state/actions/RoutingActionCreator\";\r\n\r\nexport function convertLinks(elements: Array<HTMLAnchorElement> | NodeListOf<HTMLAnchorElement>, routingActionCreator: RoutingActionCreator) {\r\n    elements.forEach((e: HTMLAnchorElement) => {\r\n        e.addEventListener(\"click\", ev => {\r\n            ev.preventDefault();\r\n            routingActionCreator.navigate(e.getAttribute(\"href\"));\r\n        });\r\n    });\r\n}","export class ArrayToElementRenderer<T, E extends HTMLElement, K>{\r\n    private keyToElement: Map<K, E>;\r\n    private elementToKey: WeakMap<E, K>;\r\n    constructor(private listElement: HTMLElement,\r\n        private keySelector: (x: T) => K,\r\n        private createElement: (x: T) => E) {\r\n        this.keyToElement = new Map<K, E>();\r\n        this.elementToKey = new WeakMap<E, K>();\r\n    }\r\n\r\n    update(list: T[], updateElement: (x: E, data: T) => void) {\r\n        let keyCache = new Map<T, K>();\r\n        let getKey = (d: T) => keyCache.get(d) || (() => {\r\n            let key = this.keySelector(d);\r\n            keyCache.set(d, key);\r\n            return key;\r\n        })();\r\n        for (let x of Array.from(this.listElement.children)) {\r\n            let el: E = <E>x;\r\n            let data = list.find(i => this.elementToKey.get(el) == getKey(i));\r\n            if (data) {\r\n                updateElement(<E>el, data);\r\n            }\r\n            else {\r\n                this.listElement.removeChild(el);\r\n            }\r\n        }\r\n        let before: Element = null;\r\n        let nextKeyToElement = new Map<K, E>();\r\n        for (let t of list) {\r\n            let key = getKey(t);\r\n            let childElement: E = this.keyToElement.get(key);\r\n            if (!childElement) {\r\n                childElement = this.createElement(t);\r\n                updateElement(childElement, t);\r\n                this.elementToKey.set(childElement, key);\r\n            }\r\n            nextKeyToElement.set(key, childElement);\r\n            if (null == before && childElement != this.listElement.firstElementChild) {\r\n                this.listElement.prepend(childElement);\r\n            }\r\n            else if (null != before && before.nextElementSibling != childElement) {\r\n                before.insertAdjacentElement(\"afterend\", childElement);\r\n            }\r\n            before = childElement;\r\n        }\r\n        this.keyToElement = nextKeyToElement;\r\n    }\r\n\r\n}","export class Popup extends HTMLElement {\r\n    private popupShown: boolean = false;\r\n    constructor() {\r\n        super();\r\n        this.keyListener = this.keyListener.bind(this);\r\n        this.clickListener = this.clickListener.bind(this);\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.updateStyles();\r\n    }\r\n\r\n    private keyListener(ev: KeyboardEvent) {\r\n        if (ev.key == \"Escape\") {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    private clickListener(ev: MouseEvent | TouchEvent) {\r\n        if (!this.contains(<Element>(event.target))) {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    public hide() {\r\n        if (this.popupShown) {\r\n            document.removeEventListener(\"keydown\", this.keyListener);\r\n            document.removeEventListener(\"click\", this.clickListener);\r\n            this.popupShown = false;\r\n            this.updateStyles();\r\n        }\r\n    }\r\n\r\n    public show() {\r\n        if (!this.popupShown) {\r\n            document.addEventListener(\"keydown\", this.keyListener);\r\n            document.addEventListener(\"click\", this.clickListener);\r\n            this.popupShown = true;\r\n            this.updateStyles();\r\n        }\r\n    }\r\n\r\n    private updateStyles() {\r\n        this.style.display = this.popupShown ? \"block\" : \"none\";\r\n    }\r\n\r\n    public toggle() {\r\n        if (!this.popupShown) {\r\n            this.show();\r\n        }\r\n        else {\r\n            this.hide();\r\n\r\n        }\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        this.hide();\r\n    }\r\n}\r\ncustomElements.define(\"app-popup\", Popup);\r\n","// Module\nvar code = \"<header class=app-bar> <kontokorrent-select class=app-bar__kontokorrent-select></kontokorrent-select> <nav class=app-bar__links> <button id=logout-button class=app-bar__link title=Logout> <span class=material-icons> exit_to_app </span> </button> <a href=info class=app-bar__link title=\\\"Informationen über diese App\\\"> <span class=material-icons> info </span> </a> </nav> </header> <app-popup id=logout-dialog> <div class=dialog__backdrop></div> <div class=dialog> <p> Wirklich aus allen Kontokorrents ausloggen? </p> <div class=dialog__button-pane> <button id=abort-logout class=button>Abbrechen</button> <button id=confirm-logout class=button>Ausloggen</button> </div> </div> </app-popup>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=kontokorrent-select-wrapper> <div class=kontokorrent-select> <h1 data-ref=kontokorrent-name class=kontokorrent-select__name>Kontokorrent</h1> <button class=kontokorrent-select__choose title=\\\"anderen Kontokorrent wählen\\\"> <span class=material-icons> arrow_drop_down </span> </button> </div> <app-popup class=kontokorrent-select__popup> <kontokorrent-select-list></kontokorrent-select-list> <div class=kontokorrent-select__buttons> <button id=add-kontokorrent class=button>weiteren hinzufügen</button> </div> </app-popup> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ol data-ref=list class=kontokorrent-select-list> </ol>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<a data-ref=link class=kontokorrent-select-list__entry> <span data-ref=name></span> </a>\";\n// Exports\nmodule.exports = code;","import template from \"./KontokorrentSelectListEntry.html\";\r\nimport { KontokorrentState } from \"../../state/State\";\r\n\r\n\r\nexport class KontokorrentSelectListEntry extends HTMLElement {\r\n    private name: HTMLSpanElement;\r\n    private link: HTMLAnchorElement;\r\n    private kontokorrent: KontokorrentState;\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.name = this.querySelector(`[data-ref=\"name\"]`);\r\n        this.link = this.querySelector(`[data-ref=\"link\"]`);\r\n        this.clickEvent = this.clickEvent.bind(this);\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.link.addEventListener(\"click\", this.clickEvent);\r\n    }\r\n\r\n    private clickEvent(e: MouseEvent): void {\r\n        e.preventDefault();\r\n        this.dispatchEvent(new CustomEvent(\"gotokontokorrent\", { detail: this.kontokorrent.id, bubbles: true }));\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        this.link.removeEventListener(\"click\", this.clickEvent);\r\n    }\r\n\r\n    update(kontokorrent: KontokorrentState, isActive: boolean) {\r\n        this.kontokorrent = kontokorrent;\r\n        this.name.innerText = kontokorrent.name;\r\n        this.link.href = `kontokorrents/${kontokorrent.id}`;\r\n        this.link.classList.toggle(\"kontokorrent-select-list__entry--active\", isActive);\r\n    }\r\n}\r\nexport const KontokorrentSelectListEntryTagName = \"kontokorrent-select-list-entry\";\r\ncustomElements.define(KontokorrentSelectListEntryTagName, KontokorrentSelectListEntry);\r\n","import template from \"./KontokorrentSelectList.html\";\r\nimport \"./KontokorrentSelectList.scss\";\r\nimport { KontokorrentState } from \"../../state/State\";\r\nimport { sortByAlphabetically } from \"../../utils/sortBy\";\r\nimport { ArrayToElementRenderer } from \"../../utils/ArrayToElementRenderer\";\r\nimport { KontokorrentSelectListEntry } from \"./KontokorrentSelectListEntry\";\r\n\r\nexport class KontokorrentSelectList extends HTMLElement {\r\n    private list: HTMLOListElement;\r\n    private _kontokorrents: KontokorrentState[];\r\n    private _activeKontokorrentId: string;\r\n    private kontokorrentsRenderer: ArrayToElementRenderer<KontokorrentState, HTMLLIElement, string>;\r\n\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.list = this.querySelector(`[data-ref=\"list\"]`);\r\n        this._kontokorrents = [];\r\n        this.kontokorrentsRenderer = new ArrayToElementRenderer(this.list,\r\n            (k: KontokorrentState) => k.id,\r\n            () => {\r\n                let li = document.createElement(\"li\");\r\n                li.appendChild(new KontokorrentSelectListEntry());\r\n                return li;\r\n            });\r\n    }\r\n\r\n    connectedCallback() {\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n    private update() {\r\n        this.kontokorrentsRenderer.update(this._kontokorrents,\r\n            (li, kontokorrent) => {\r\n                let x: KontokorrentSelectListEntry = <KontokorrentSelectListEntry>li.firstChild;\r\n                x.update(kontokorrent, this._activeKontokorrentId == kontokorrent.id);\r\n            });\r\n    }\r\n\r\n    set kontokorrents(kontokorrents: KontokorrentState[]) {\r\n        this._kontokorrents = sortByAlphabetically(kontokorrents, k => k.name);\r\n        this.update();\r\n    }\r\n\r\n    set activeKontokorrentId(id: string) {\r\n        this._activeKontokorrentId = id;\r\n        this.update();\r\n    }\r\n}\r\nexport const KontokorrentSelectListTagName = \"kontokorrent-select-list\";\r\ncustomElements.define(KontokorrentSelectListTagName, KontokorrentSelectList);\r\n","import template from \"./KontokorrentSelect.html\";\r\nimport \"./KontokorrentSelect.scss\";\r\nimport \"./KontokorrentSelectList\";\r\nimport { KontokorrentState } from \"../../state/State\";\r\nimport { KontokorrentSelectListTagName, KontokorrentSelectList } from \"./KontokorrentSelectList\";\r\nimport { Popup } from \"../ui-components/popup/popup\";\r\nimport \"../ui-components/popup/popup\";\r\n\r\nexport class KontokorrentSelect extends HTMLElement {\r\n    private kontokorrentName: HTMLHeadingElement;\r\n    private popup: Popup;\r\n    private kontokorrentSelectList: KontokorrentSelectList;\r\n    private addButton: HTMLButtonElement;\r\n    private activeKontokorrentId: string;\r\n    private _kontokorrents: KontokorrentState[];\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.kontokorrentName = this.querySelector(`[data-ref=\"kontokorrent-name\"]`);\r\n        this.kontokorrentSelectList = this.querySelector(KontokorrentSelectListTagName);\r\n        this.addButton = this.querySelector(`#add-kontokorrent`);\r\n        this._kontokorrents = null;\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.popup = this.querySelector(`app-popup`);\r\n        this.updateAttributes();\r\n        this.addEventListener(\"click\", e => {\r\n            if (!this.popup.contains(<Element>(event.target))) {\r\n                this.popup.toggle();\r\n                e.stopPropagation();\r\n            }\r\n        });\r\n        this.addButton.addEventListener(\"click\", e => {\r\n            this.dispatchEvent(new CustomEvent(\"addkontokorrent\"));\r\n        });\r\n        this.kontokorrentSelectList.addEventListener(\"gotokontokorrent\", () => {\r\n            this.popup.hide();\r\n        })\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n    attributeChangedCallback() {\r\n        this.updateAttributes();\r\n    }\r\n\r\n    private updateAttributes() {\r\n        this.activeKontokorrentId = this.getAttribute(\"active-kontokorrent-id\");\r\n        this.kontokorrentSelectList.activeKontokorrentId = this.activeKontokorrentId;\r\n        this.updatesStyle();\r\n    }\r\n\r\n    static get observedAttributes() {\r\n        return [\"active-kontokorrent-id\"];\r\n    }\r\n\r\n    set kontokorrents(kontokorrents: KontokorrentState[]) {\r\n        this.kontokorrentSelectList.kontokorrents = kontokorrents;\r\n        this._kontokorrents = kontokorrents;\r\n        this.updatesStyle();\r\n    }\r\n\r\n    private updatesStyle() {\r\n        if (this._kontokorrents && this._kontokorrents.length) {\r\n            let activeKontokorrent = this._kontokorrents.find(k => k.id == this.activeKontokorrentId);\r\n            if (activeKontokorrent) {\r\n                this.kontokorrentName.innerText = activeKontokorrent.name;\r\n            }\r\n            else {\r\n                this.kontokorrentName.innerText = \"(Kontokorrent wählen)\";\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\nexport const KontokorrentSelectTagName = \"kontokorrent-select\";\r\ncustomElements.define(KontokorrentSelectTagName, KontokorrentSelect);\r\n","import template from \"./AppBar.html\";\r\nimport \"./AppBar.scss\";\r\nimport { RoutingActionCreator } from \"../../state/actions/RoutingActionCreator\";\r\nimport { convertLinks } from \"../convertLinks\";\r\nimport \"../KontokorrentSelect/KontokorrentSelect\";\r\nimport { KontokorrentSelectTagName, KontokorrentSelect } from \"../KontokorrentSelect/KontokorrentSelect\";\r\nimport { ServiceLocator } from \"../../ServiceLocator\";\r\nimport { AccountActionCreator } from \"../../state/actions/AccountActionCreator\";\r\nimport { KontokorrentsActionCreator } from \"../../state/actions/KontokorrentsActionCreator\";\r\nimport { Store } from \"../../state/Store\";\r\nimport { State } from \"../../state/State\";\r\nimport { Popup } from \"../ui-components/popup/popup\";\r\n\r\nexport class AppBar extends HTMLElement {\r\n    private kontokorrentSelect: KontokorrentSelect;\r\n    private store: Store;\r\n    private routingActionCreator: RoutingActionCreator;\r\n    private accountActionCreator: AccountActionCreator;\r\n    private kontokorrentsActionCreator: KontokorrentsActionCreator;\r\n    private logoutDialog: Popup;\r\n    private subscription: () => void;\r\n\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.kontokorrentSelect = this.querySelector(KontokorrentSelectTagName);\r\n        this.logoutDialog = this.querySelector(\"#logout-dialog\");\r\n    }\r\n\r\n    connectedCallback() {\r\n        document.body.classList.add(\"body--app-bar\");\r\n        this.querySelector(\"#logout-button\").addEventListener(\"click\", (e: MouseEvent) => {\r\n            this.logoutDialog.toggle();\r\n            e.stopPropagation();\r\n        });\r\n        this.querySelector(\"#confirm-logout\").addEventListener(\"click\", async () => {\r\n            await this.accountActionCreator.logout();\r\n        });\r\n        this.querySelector(\"#abort-logout\").addEventListener(\"click\", () => {\r\n            this.logoutDialog.hide();\r\n        });\r\n        convertLinks(this.querySelectorAll(\"a\"), this.routingActionCreator);\r\n        this.subscription = this.store.subscribe(null, state => this.applyStoreState(state));\r\n        this.applyStoreState(this.store.state);\r\n        this.kontokorrentSelect.addEventListener(\"addkontokorrent\", () => {\r\n            this.routingActionCreator.navigateLogin();\r\n        });\r\n    }\r\n\r\n    applyStoreState(state: State): void {\r\n        this.kontokorrentSelect.kontokorrents = Object.values(state.kontokorrents.kontokorrents);\r\n        this.kontokorrentSelect.setAttribute(\"active-kontokorrent-id\", state.kontokorrents.activeKontokorrentId);\r\n    }\r\n\r\n    addServices(serviceLocator: ServiceLocator) {\r\n        this.store = serviceLocator.store;\r\n        this.routingActionCreator = serviceLocator.routingActionCreator;\r\n        this.accountActionCreator = serviceLocator.accountActionCreator;\r\n        this.kontokorrentsActionCreator = serviceLocator.kontokorrentsActionCreator;\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        document.body.classList.remove(\"body--app-bar\");\r\n        this.subscription();\r\n    }\r\n}\r\nexport const AppBarTagName = \"app-bar\";\r\ncustomElements.define(AppBarTagName, AppBar);\r\n","// Module\nvar code = \"<app-bar></app-bar> <a id=zurueck-zum-kontokorrent>zurück zum Kontokorrent</a>\";\n// Exports\nmodule.exports = code;","import template from \"./BezahlungEintragenPage.html\";\r\nimport { Store } from \"../../state/Store\";\r\nimport { ServiceLocator } from \"../../ServiceLocator\";\r\nimport { RoutingActionCreator } from \"../../state/actions/RoutingActionCreator\";\r\nimport { AppBar, AppBarTagName } from \"../AppBar/AppBar\";\r\nimport \"./BezahlungEintragenPage.scss\";\r\nimport { BezahlungActionCreator } from \"../../state/actions/BezahlungActionCreator\";\r\nimport { State } from \"../../state/State\";\r\nimport { convertLinks } from \"../convertLinks\";\r\n\r\nexport class BezahlungEintragenPage extends HTMLElement {\r\n    private store: Store;\r\n    private subscription: () => void;\r\n    private routingActionCreator: RoutingActionCreator;\r\n    private appBar: AppBar;\r\n    private bezahlungActionCreator: BezahlungActionCreator;\r\n    private zurueckLink: HTMLAnchorElement;\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.zurueckLink = this.querySelector(\"#zurueck-zum-kontokorrent\");\r\n        this.appBar = this.querySelector(AppBarTagName);\r\n    }\r\n\r\n    addServices(serviceLocator: ServiceLocator) {\r\n        this.store = serviceLocator.store;\r\n        this.routingActionCreator = serviceLocator.routingActionCreator;\r\n        this.bezahlungActionCreator = serviceLocator.bezahlungActionCreator;\r\n        this.appBar.addServices(serviceLocator);\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.subscription = this.store.subscribe(\"kontokorrents\", s => this.applyStoreState(s));\r\n        this.appBar.addEventListener(\"gotokontokorrent\", (e: CustomEvent) => {\r\n            this.bezahlungActionCreator.bezahlungEintragenKontokorrentChanged(e.detail);\r\n        });\r\n        this.bezahlungActionCreator.bezahlungEintragenGeoeffnet();\r\n        convertLinks([this.zurueckLink], this.routingActionCreator);\r\n    }\r\n\r\n    private applyStoreState(s: State) {\r\n        this.zurueckLink.href = s.kontokorrents.activeKontokorrentId ? `kontokorrents/${s.kontokorrents.activeKontokorrentId}` : null;\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        this.subscription();\r\n    }\r\n}\r\n\r\ncustomElements.define('bezahlung-eintragen-page', BezahlungEintragenPage);\r\n"],"sourceRoot":""}