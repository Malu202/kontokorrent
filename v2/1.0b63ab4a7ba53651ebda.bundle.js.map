{"version":3,"sources":["webpack:///./src/components/convertLinks.ts","webpack:///./src/utils/ArrayToElementRenderer.ts","webpack:///./src/utils/Popup.ts","webpack:///./src/components/AppBar/AppBar.html","webpack:///./src/components/KontokorrentSelect/KontokorrentSelect.html","webpack:///./src/components/KontokorrentSelect/KontokorrentSelectList.html","webpack:///./src/components/KontokorrentSelect/KontokorrentSelectListEntry.html","webpack:///./src/components/KontokorrentSelect/KontokorrentSelectListEntry.ts","webpack:///./src/components/KontokorrentSelect/KontokorrentSelectList.ts","webpack:///./src/components/KontokorrentSelect/KontokorrentSelect.ts","webpack:///./src/components/AppBar/AppBar.ts","webpack:///./src/components/KontokorrentPage/KontokorrentPage.html","webpack:///./src/components/BalanceAnzeige/BalanceAnzeigeElement.html","webpack:///./src/components/BalanceAnzeige/BalanceAnzeige.html","webpack:///./src/components/BezahlungenView/BezahlungenView.html","webpack:///./src/components/BezahlungCard/BezahlungCard.html","webpack:///./src/components/BezahlungenView/BezahlungenGroup.html","webpack:///./src/utils/formatCurrency.ts","webpack:///./src/utils/round.ts","webpack:///./src/components/BalanceAnzeige/BalanceAnzeigeElement.ts","webpack:///./src/components/BalanceAnzeige/BalanceAnzeige.ts","webpack:///./src/components/BezahlungCard/BezahlungCard.ts","webpack:///./node_modules/date-fns/esm/_lib/toInteger/index.js","webpack:///./node_modules/date-fns/esm/_lib/requiredArgs/index.js","webpack:///./node_modules/date-fns/esm/toDate/index.js","webpack:///./node_modules/date-fns/esm/startOfDay/index.js","webpack:///./node_modules/date-fns/esm/startOfWeek/index.js","webpack:///./src/utils/groupBy.ts","webpack:///./src/components/BezahlungenView/BezahlungenGroup.ts","webpack:///./src/components/BezahlungenView/BezahlungenView.ts","webpack:///./node_modules/date-fns/esm/addDays/index.js","webpack:///./node_modules/date-fns/esm/startOfToday/index.js","webpack:///./node_modules/date-fns/esm/endOfWeek/index.js","webpack:///./src/components/KontokorrentPage/KontokorrentPage.ts"],"names":["convertLinks","elements","routingActionCreator","forEach","e","addEventListener","ev","preventDefault","navigate","getAttribute","ArrayToElementRenderer","listElement","keySelector","createElement","this","keyToElement","Map","elementToKey","WeakMap","list","updateElement","keyCache","getKey","d","get","key","set","x","Array","from","children","el","data","find","i","removeChild","before","nextKeyToElement","t","childElement","firstElementChild","prepend","nextElementSibling","insertAdjacentElement","Popup","HTMLElement","super","popupShown","keyListener","bind","clickListener","updateStyles","hide","contains","event","document","removeEventListener","style","display","show","customElements","define","module","exports","innerHTML","name","querySelector","link","clickEvent","dispatchEvent","CustomEvent","detail","kontokorrent","id","bubbles","isActive","innerText","href","classList","toggle","_kontokorrents","kontokorrentsRenderer","k","li","appendChild","update","firstChild","_activeKontokorrentId","kontokorrents","sortBy","kontokorrentName","kontokorrentSelectList","addButton","popup","updateAttributes","stopPropagation","activeKontokorrentId","updatesStyle","length","activeKontokorrent","kontokorrentSelect","logoutDialog","body","add","accountActionCreator","logout","querySelectorAll","subscription","store","subscribe","state","applyStoreState","navigateLogin","navigateKontokorrent","Object","values","setAttribute","serviceLocator","kontokorrentsActionCreator","remove","AppBarTagName","formatCurrency","wert","decimals","valueString","indexOfE","indexOfe","power","Betrag","toString","indexOf","parseFloat","substring","Number","Math","round","Kommaindex","personNameElement","balanceTextElement","balanceContainerElement","barElement","requestAnimationFrame","transform","personName","balance","balanceRange","max","scale","sign","abs","balanceTransform","personenRenderer","b","personen","map","v","attributeStore","beschreibung","bezahlendePerson","empfaenger","beschreibungElement","bezahlendePersonElement","empfaengerElement","wertElement","prop","getAtt","att","checkChanged","some","toInteger","dirtyNumber","NaN","number","isNaN","ceil","floor","requiredArgs","required","args","TypeError","toDate","argument","arguments","argStr","prototype","call","Date","getTime","console","warn","Error","stack","startOfDay","dirtyDate","date","setHours","startOfWeek","dirtyOptions","options","locale","localeWeekStartsOn","weekStartsOn","defaultWeekStartsOn","RangeError","day","getDay","diff","setDate","getDate","groupBy","item","collection","push","container","titleElement","bezahlungenRenderer","bezahlungen","bezahlendePersonName","minTage","minEintraege","all","bezahlungenContainer","showMoreButton","showMoreClick","groupRenderer","s","anzahlEintraege","last","lastElementChild","scrollIntoView","setShowMoreButtonDisplay","z","empfaengerIds","p","join","render","sorted","sort","a","zeitpunkt","filtered","filter","dirtyAmount","amount","addDays","now","slice","mapped","bezahlendePersonId","formatEmpfaenger","tag","woche","isWeek","grouped","of","entries","reduce","c","sortedGroups","setBezahlungen","title","formatWeek","formatDay","val","weekformat","endWeek","endOfWeek","dayAndMonth","Intl","DateTimeFormat","month","format","getMonth","weekday","year","appBar","AppBar","balanceAnzeige","bezahlungenView","kontokorrentSpinner","addServices","setBalance","synchronisieren","kontokorrentOeffnen"],"mappings":"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","file":"1.0b63ab4a7ba53651ebda.bundle.js","sourcesContent":["import { RoutingActionCreator } from \"../state/actions/RoutingActionCreator\";\r\n\r\nexport function convertLinks(elements: NodeListOf<HTMLAnchorElement>, routingActionCreator: RoutingActionCreator) {\r\n    elements.forEach(e => {\r\n        e.addEventListener(\"click\", ev => {\r\n            ev.preventDefault();\r\n            routingActionCreator.navigate(e.getAttribute(\"href\"));\r\n        });\r\n    });\r\n}","export class ArrayToElementRenderer<T, E extends HTMLElement, K>{\r\n    private keyToElement: Map<K, E>;\r\n    private elementToKey: WeakMap<E, K>;\r\n    constructor(private listElement: HTMLElement,\r\n        private keySelector: (x: T) => K,\r\n        private createElement: (x: T) => E) {\r\n        this.keyToElement = new Map<K, E>();\r\n        this.elementToKey = new WeakMap<E, K>();\r\n    }\r\n\r\n    update(list: T[], updateElement: (x: E, data: T) => void) {\r\n        let keyCache = new Map<T, K>();\r\n        let getKey = (d: T) => keyCache.get(d) || (() => {\r\n            let key = this.keySelector(d);\r\n            keyCache.set(d, key);\r\n            return key;\r\n        })();\r\n        for (let x of Array.from(this.listElement.children)) {\r\n            let el: E = <E>x;\r\n            let data = list.find(i => this.elementToKey.get(el) == getKey(i));\r\n            if (data) {\r\n                updateElement(<E>el, data);\r\n            }\r\n            else {\r\n                this.listElement.removeChild(el);\r\n            }\r\n        }\r\n        let before: Element = null;\r\n        let nextKeyToElement = new Map<K, E>();\r\n        for (let t of list) {\r\n            let key = getKey(t);\r\n            let childElement: E = this.keyToElement.get(key);\r\n            if (!childElement) {\r\n                childElement = this.createElement(t);\r\n                updateElement(childElement, t);\r\n                this.elementToKey.set(childElement, key);\r\n            }\r\n            nextKeyToElement.set(key, childElement);\r\n            if (null == before && childElement != this.listElement.firstElementChild) {\r\n                this.listElement.prepend(childElement);\r\n            }\r\n            else if (null != before && before.nextElementSibling != childElement) {\r\n                before.insertAdjacentElement(\"afterend\", childElement);\r\n            }\r\n            before = childElement;\r\n        }\r\n        this.keyToElement = nextKeyToElement;\r\n    }\r\n\r\n}","export class Popup extends HTMLElement {\r\n    private popupShown: boolean = false;\r\n    constructor() {\r\n        super();\r\n        this.keyListener = this.keyListener.bind(this);\r\n        this.clickListener = this.clickListener.bind(this);\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.updateStyles();\r\n    }\r\n\r\n    private keyListener(ev: KeyboardEvent) {\r\n        if (ev.key == \"Escape\") {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    private clickListener(ev: MouseEvent | TouchEvent) {\r\n        if (!this.contains(<Element>(event.target))) {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    public hide() {\r\n        if (this.popupShown) {\r\n            document.removeEventListener(\"keydown\", this.keyListener);\r\n            document.removeEventListener(\"click\", this.clickListener);\r\n            this.popupShown = false;\r\n            this.updateStyles();\r\n        }\r\n    }\r\n\r\n    public show() {\r\n        if (!this.popupShown) {\r\n            document.addEventListener(\"keydown\", this.keyListener);\r\n            document.addEventListener(\"click\", this.clickListener);\r\n            this.popupShown = true;\r\n            this.updateStyles();\r\n        }\r\n    }\r\n\r\n    private updateStyles() {\r\n        this.style.display = this.popupShown ? \"block\" : \"none\";\r\n    }\r\n\r\n    public toggle() {\r\n        if (!this.popupShown) {\r\n            this.show();\r\n        }\r\n        else {\r\n            this.hide();\r\n\r\n        }\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        this.hide();\r\n    }\r\n}\r\ncustomElements.define(\"app-popup\", Popup);\r\n","// Module\nvar code = \"<header class=app-bar> <kontokorrent-select class=app-bar__kontokorrent-select></kontokorrent-select> <nav class=app-bar__links> <button id=logout-button class=app-bar__link title=Logout> <span class=material-icons> exit_to_app </span> </button> <a href=info class=app-bar__link title=\\\"Informationen über diese App\\\"> <span class=material-icons> info </span> </a> </nav> </header> <app-popup id=logout-dialog> <div class=dialog__backdrop></div> <div class=dialog> <p> Wirklich aus allen Kontokorrents ausloggen? </p> <div class=dialog__button-pane> <button id=abort-logout class=button>Abbrechen</button> <button id=confirm-logout class=button>Ausloggen</button> </div> </div> </app-popup>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=kontokorrent-select-wrapper> <div class=kontokorrent-select> <h1 data-ref=kontokorrent-name class=kontokorrent-select__name>Kontokorrent</h1> <button class=kontokorrent-select__choose title=\\\"anderen Kontokorrent wählen\\\"> <span class=material-icons> arrow_drop_down </span> </button> </div> <app-popup class=kontokorrent-select__popup> <kontokorrent-select-list></kontokorrent-select-list> <div class=kontokorrent-select__buttons> <button id=add-kontokorrent class=button>weiteren hinzufügen</button> </div> </app-popup> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ol data-ref=list class=kontokorrent-select-list> </ol>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<a data-ref=link class=kontokorrent-select-list__entry> <span data-ref=name></span> </a>\";\n// Exports\nmodule.exports = code;","import template from \"./KontokorrentSelectListEntry.html\";\r\nimport { KontokorrentState } from \"../../state/State\";\r\n\r\n\r\nexport class KontokorrentSelectListEntry extends HTMLElement {\r\n    private name: HTMLSpanElement;\r\n    private link: HTMLAnchorElement;\r\n    private kontokorrent: KontokorrentState;\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.name = this.querySelector(`[data-ref=\"name\"]`);\r\n        this.link = this.querySelector(`[data-ref=\"link\"]`);\r\n        this.clickEvent = this.clickEvent.bind(this);\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.link.addEventListener(\"click\", this.clickEvent);\r\n    }\r\n\r\n    private clickEvent(e: MouseEvent): void {\r\n        e.preventDefault();\r\n        this.dispatchEvent(new CustomEvent(\"gotokontokorrent\", { detail: this.kontokorrent.id, bubbles: true }));\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        this.link.removeEventListener(\"click\", this.clickEvent);\r\n    }\r\n\r\n    update(kontokorrent: KontokorrentState, isActive: boolean) {\r\n        this.kontokorrent = kontokorrent;\r\n        this.name.innerText = kontokorrent.name;\r\n        this.link.href = `kontokorrents/${kontokorrent.id}`;\r\n        this.link.classList.toggle(\"kontokorrent-select-list__entry--active\", isActive);\r\n    }\r\n}\r\nexport const KontokorrentSelectListEntryTagName = \"kontokorrent-select-list-entry\";\r\ncustomElements.define(KontokorrentSelectListEntryTagName, KontokorrentSelectListEntry);\r\n","import template from \"./KontokorrentSelectList.html\";\r\nimport \"./KontokorrentSelectList.scss\";\r\nimport { KontokorrentState } from \"../../state/State\";\r\nimport { sortByAlphabetically } from \"../../utils/sortBy\";\r\nimport { ArrayToElementRenderer } from \"../../utils/ArrayToElementRenderer\";\r\nimport { KontokorrentSelectListEntry } from \"./KontokorrentSelectListEntry\";\r\n\r\nexport class KontokorrentSelectList extends HTMLElement {\r\n    private list: HTMLOListElement;\r\n    private _kontokorrents: KontokorrentState[];\r\n    private _activeKontokorrentId: string;\r\n    private kontokorrentsRenderer: ArrayToElementRenderer<KontokorrentState, HTMLLIElement, string>;\r\n\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.list = this.querySelector(`[data-ref=\"list\"]`);\r\n        this._kontokorrents = [];\r\n        this.kontokorrentsRenderer = new ArrayToElementRenderer(this.list,\r\n            (k: KontokorrentState) => k.id,\r\n            () => {\r\n                let li = document.createElement(\"li\");\r\n                li.appendChild(new KontokorrentSelectListEntry());\r\n                return li;\r\n            });\r\n    }\r\n\r\n    connectedCallback() {\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n    private update() {\r\n        this.kontokorrentsRenderer.update(this._kontokorrents,\r\n            (li, kontokorrent) => {\r\n                let x: KontokorrentSelectListEntry = <KontokorrentSelectListEntry>li.firstChild;\r\n                x.update(kontokorrent, this._activeKontokorrentId == kontokorrent.id);\r\n            });\r\n    }\r\n\r\n    set kontokorrents(kontokorrents: KontokorrentState[]) {\r\n        this._kontokorrents = sortByAlphabetically(kontokorrents, k => k.name);\r\n        this.update();\r\n    }\r\n\r\n    set activeKontokorrentId(id: string) {\r\n        this._activeKontokorrentId = id;\r\n        this.update();\r\n    }\r\n}\r\nexport const KontokorrentSelectListTagName = \"kontokorrent-select-list\";\r\ncustomElements.define(KontokorrentSelectListTagName, KontokorrentSelectList);\r\n","import template from \"./KontokorrentSelect.html\";\r\nimport \"./KontokorrentSelect.scss\";\r\nimport \"./KontokorrentSelectList\";\r\nimport { KontokorrentState } from \"../../state/State\";\r\nimport { KontokorrentSelectListTagName, KontokorrentSelectList } from \"./KontokorrentSelectList\";\r\nimport { Popup } from \"../../utils/Popup\";\r\nimport \"../../utils/Popup\";\r\n\r\nexport class KontokorrentSelect extends HTMLElement {\r\n    private kontokorrentName: HTMLHeadingElement;\r\n    private popup: Popup;\r\n    private kontokorrentSelectList: KontokorrentSelectList;\r\n    private addButton: HTMLButtonElement;\r\n    private activeKontokorrentId: string;\r\n    private _kontokorrents: KontokorrentState[];\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.kontokorrentName = this.querySelector(`[data-ref=\"kontokorrent-name\"]`);\r\n        this.kontokorrentSelectList = this.querySelector(KontokorrentSelectListTagName);\r\n        this.addButton = this.querySelector(`#add-kontokorrent`);\r\n        this._kontokorrents = null;\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.popup = this.querySelector(`app-popup`);\r\n        this.updateAttributes();\r\n        this.addEventListener(\"click\", e => {\r\n            if (!this.popup.contains(<Element>(event.target))) {\r\n                this.popup.toggle();\r\n                e.stopPropagation();\r\n            }\r\n        });\r\n        this.addButton.addEventListener(\"click\", e => {\r\n            this.dispatchEvent(new CustomEvent(\"addkontokorrent\"));\r\n        });\r\n        this.kontokorrentSelectList.addEventListener(\"gotokontokorrent\", () => {\r\n            this.popup.hide();\r\n        })\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n    attributeChangedCallback() {\r\n        this.updateAttributes();\r\n    }\r\n\r\n    private updateAttributes() {\r\n        this.activeKontokorrentId = this.getAttribute(\"active-kontokorrent-id\");\r\n        this.kontokorrentSelectList.activeKontokorrentId = this.activeKontokorrentId;\r\n        this.updatesStyle();\r\n    }\r\n\r\n    static get observedAttributes() {\r\n        return [\"active-kontokorrent-id\"];\r\n    }\r\n\r\n    set kontokorrents(kontokorrents: KontokorrentState[]) {\r\n        this.kontokorrentSelectList.kontokorrents = kontokorrents;\r\n        this._kontokorrents = kontokorrents;\r\n        this.updatesStyle();\r\n    }\r\n\r\n    private updatesStyle() {\r\n        if (this._kontokorrents && this._kontokorrents.length) {\r\n            let activeKontokorrent = this._kontokorrents.find(k => k.id == this.activeKontokorrentId);\r\n            if (activeKontokorrent) {\r\n                this.kontokorrentName.innerText = activeKontokorrent.name;\r\n            }\r\n            else {\r\n                this.kontokorrentName.innerText = \"(Kontokorrent wählen)\";\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\nexport const KontokorrentSelectTagName = \"kontokorrent-select\";\r\ncustomElements.define(KontokorrentSelectTagName, KontokorrentSelect);\r\n","import template from \"./AppBar.html\";\r\nimport \"./AppBar.scss\";\r\nimport \"../dialog.scss\";\r\nimport { RoutingActionCreator } from \"../../state/actions/RoutingActionCreator\";\r\nimport { convertLinks } from \"../convertLinks\";\r\nimport \"../KontokorrentSelect/KontokorrentSelect\";\r\nimport { KontokorrentSelectTagName, KontokorrentSelect } from \"../KontokorrentSelect/KontokorrentSelect\";\r\nimport { ServiceLocator } from \"../../ServiceLocator\";\r\nimport { AccountActionCreator } from \"../../state/actions/AccountActionCreator\";\r\nimport { KontokorrentsActionCreator } from \"../../state/actions/KontokorrentsActionCreator\";\r\nimport { Store } from \"../../state/Store\";\r\nimport { State } from \"../../state/State\";\r\nimport { stat } from \"fs\";\r\nimport { Popup } from \"../../utils/Popup\";\r\n\r\nexport class AppBar extends HTMLElement {\r\n    private kontokorrentSelect: KontokorrentSelect;\r\n    private store: Store;\r\n    private routingActionCreator: RoutingActionCreator;\r\n    private accountActionCreator: AccountActionCreator;\r\n    private kontokorrentsActionCreator: KontokorrentsActionCreator;\r\n    private logoutDialog: Popup;\r\n    private subscription: () => void;\r\n\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.kontokorrentSelect = this.querySelector(KontokorrentSelectTagName);\r\n        this.logoutDialog = this.querySelector(\"#logout-dialog\");\r\n    }\r\n\r\n    connectedCallback() {\r\n        document.body.classList.add(\"body--app-bar\");\r\n        this.querySelector(\"#logout-button\").addEventListener(\"click\", (e: MouseEvent) => {\r\n            this.logoutDialog.toggle();\r\n            e.stopPropagation();\r\n        });\r\n        this.querySelector(\"#confirm-logout\").addEventListener(\"click\", async () => {\r\n            await this.accountActionCreator.logout();\r\n        });\r\n        this.querySelector(\"#abort-logout\").addEventListener(\"click\", () => {\r\n            this.logoutDialog.hide();\r\n        });\r\n        convertLinks(this.querySelectorAll(\"a\"), this.routingActionCreator);\r\n        this.subscription = this.store.subscribe(null, state => this.applyStoreState(state));\r\n        this.applyStoreState(this.store.state);\r\n        this.kontokorrentSelect.addEventListener(\"addkontokorrent\", () => {\r\n            this.routingActionCreator.navigateLogin();\r\n        });\r\n        this.kontokorrentSelect.addEventListener(\"gotokontokorrent\", (e: CustomEvent) => {\r\n            this.routingActionCreator.navigateKontokorrent(e.detail);\r\n        });\r\n    }\r\n\r\n    applyStoreState(state: State): void {\r\n        this.kontokorrentSelect.kontokorrents = Object.values(state.kontokorrents.kontokorrents);\r\n        this.kontokorrentSelect.setAttribute(\"active-kontokorrent-id\", state.kontokorrents.activeKontokorrentId);\r\n    }\r\n\r\n    addServices(serviceLocator: ServiceLocator) {\r\n        this.store = serviceLocator.store;\r\n        this.routingActionCreator = serviceLocator.routingActionCreator;\r\n        this.accountActionCreator = serviceLocator.accountActionCreator;\r\n        this.kontokorrentsActionCreator = serviceLocator.kontokorrentsActionCreator;\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        document.body.classList.remove(\"body--app-bar\");\r\n        this.subscription();\r\n    }\r\n}\r\nexport const AppBarTagName = \"app-bar\";\r\ncustomElements.define(AppBarTagName, AppBar);\r\n","// Module\nvar code = \"<app-bar></app-bar> <div style=display:none id=login-expired>Google-Login abgelaufen: zum Synchronisieren neu anmelden</div> <balance-anzeige id=balance-anzeige></balance-anzeige> <div class=kontokorrentpage-menu> <a id=eintragen-desktop class=\\\"floating-action-button floating-action-button--embed\\\"> <span class=material-icons> add </span> eintragen </a> <span class=kontokorrentpage-menu__sync-display id=spinner style=display:none> <div class=spinner></div> synchronisieren </span> </div> <bezahlungen-view id=bezahlungen-view></bezahlungen-view> <a id=eintragen-mobile class=\\\"floating-action-button floating-action-button--fixed\\\"> <span class=material-icons> add </span> eintragen </a>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=balance-anzeige-element__graphic-container> <div class=balance-anzeige-element__bar data-ref=bar></div> <div class=balance-anzeige-element__horizontal-line></div> <span class=balance-anzeige-element__balance data-ref=balance-container> <span data-ref=balance-text></span>€ </span> </div> <div class=balance-anzeige-element__text-container> <span data-ref=person-name class=balance-anzeige-element__name></span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=balance-anzeige-element__graphic-container> <div class=balance-anzeige-element__bar data-ref=bar></div> <div class=balance-anzeige-element__horizontal-line></div> <span class=balance-anzeige-element__balance data-ref=balance-container> <span data-ref=balance-text></span>€ </span> </div> <div class=balance-anzeige-element__text-container> <span data-ref=person-name class=balance-anzeige-element__name></span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div id=bezahlungen-container> </div> <button id=show-more class=button>Mehr anzeigen</button>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=bezahlung-card__beschreibung> <div data-ref=beschreibung></div> <div class=bezahlung-card__personen> <span data-ref=bezahlende-person></span> für <span data-ref=empfaenger></span> </div> </div> <div class=bezahlung-card__wert> <span data-ref=wert></span>€ </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<h3 data-ref=title class=bezahlungen-group__title>Gruppe</h3> <div class=bezahlungen-group__container data-ref=container></div>\";\n// Exports\nmodule.exports = code;","import { round } from \"./round\";\r\n\r\nexport function formatCurrency(wert: number) {\r\n    var Betrag: string = \"\" + round(wert, 2);\r\n    var Kommaindex = Betrag.toString().indexOf(\".\");\r\n    var Nachkommastellen = 0;\r\n    if (Kommaindex != -1) {\r\n        Nachkommastellen = Betrag.toString().length - (Kommaindex + 1);\r\n        if (Nachkommastellen == 1)\r\n            Betrag += '0';\r\n    }\r\n    return Betrag;\r\n}\r\n","export function round(value: number, decimals: number) {\r\n\r\n    //Removing scientific notation if used:\r\n    var valueString = value.toString();\r\n    var indexOfE = valueString.indexOf(\"E\");\r\n    var indexOfe = valueString.indexOf(\"e\");\r\n    var power = 0;\r\n    if (indexOfe > -1) {\r\n        power = parseFloat(valueString.substring(indexOfe + 1));\r\n        valueString = valueString.substring(0, indexOfe)\r\n    } else if (indexOfE > -1) {\r\n        power = parseFloat(valueString.substring(indexOfE + 1));\r\n        valueString = valueString.substring(0, indexOfE)\r\n    }\r\n    //round\r\n    return Number(Math.round(Number(valueString + 'e' + (power + decimals))) + 'e-' + (decimals));\r\n}","import template from \"./BalanceAnzeigeElement.html\";\r\nimport \"./BalanceAnzeigeElement.scss\";\r\nimport { formatCurrency } from \"../../utils/formatCurrency\";\r\n\r\nexport const PersonNameAttribute = \"person-name\";\r\nexport const BalanceAttribute = \"balance\";\r\nexport const BalanceRangeAttribute = \"balance-range\";\r\n\r\nexport class BalanceAnzeigeElement extends HTMLElement {\r\n    private personName: string;\r\n    private balance: number;\r\n    private personNameElement: HTMLSpanElement;\r\n    private balanceTextElement: HTMLSpanElement;\r\n    private balanceRange: number;\r\n    private barElement: HTMLDivElement;\r\n    private balanceContainerElement: HTMLSpanElement;\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.personNameElement = this.querySelector(`[data-ref=\"person-name\"]`);\r\n        this.balanceTextElement = this.querySelector(`[data-ref=\"balance-text\"]`);\r\n        this.balanceContainerElement = this.querySelector(`[data-ref=\"balance-container\"]`);\r\n        this.barElement = this.querySelector(`[data-ref=\"bar\"]`);\r\n    }\r\n\r\n    connectedCallback() {\r\n        requestAnimationFrame(() => {\r\n            this.barElement.style.transform = `scaleY(0)`;\r\n            this.updatesStyle();\r\n        });\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n    attributeChangedCallback() {\r\n        this.updateAttributes();\r\n    }\r\n\r\n    private updateAttributes() {\r\n        this.personName = this.getAttribute(PersonNameAttribute);\r\n        this.balance = parseFloat(this.getAttribute(BalanceAttribute));\r\n        this.balanceRange = Math.max(2, parseFloat(this.getAttribute(BalanceRangeAttribute)));\r\n        this.updatesStyle();\r\n    }\r\n\r\n    static get observedAttributes() {\r\n        return [PersonNameAttribute, BalanceAttribute, BalanceRangeAttribute];\r\n    }\r\n\r\n    private updatesStyle() {\r\n        requestAnimationFrame(() => {\r\n            this.personNameElement.innerText = this.personName;\r\n            this.balanceTextElement.innerText = formatCurrency(this.balance);\r\n            let scale = Math.sign(this.balance) * Math.abs(this.balance) / this.balanceRange;\r\n            let balanceTransform = scale * 1.9;\r\n            this.barElement.style.transform = `scaleY(${scale})`;\r\n            this.balanceContainerElement.style.transform = Math.sign(this.balance) < 0 ? `translateY(calc(${balanceTransform}em - 150%))`\r\n                : `translateY(calc(${balanceTransform}em + 50%))`;\r\n            if (scale > 0) {\r\n                this.barElement.classList.add(\"balance-anzeige-element__bar--negative\");\r\n                this.barElement.classList.remove(\"balance-anzeige-element__bar--positive\");\r\n            }\r\n            else {\r\n                this.barElement.classList.remove(\"balance-anzeige-element__bar--negative\");\r\n                this.barElement.classList.add(\"balance-anzeige-element__bar--positive\");\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\nexport const BalanceAnzeigeElementTagName = \"balance-anzeige-element\";\r\ncustomElements.define(BalanceAnzeigeElementTagName, BalanceAnzeigeElement);\r\n","import template from \"./BalanceAnzeige.html\";\r\nimport { ArrayToElementRenderer } from \"../../utils/ArrayToElementRenderer\";\r\nimport { BalanceAnzeigeElement, PersonNameAttribute, BalanceAttribute, BalanceRangeAttribute } from \"./BalanceAnzeigeElement\";\r\nimport { Person } from \"../../state/State\";\r\n\r\nexport class BalanceAnzeige extends HTMLElement {\r\n    private balanceRange: number;\r\n    private personen: Person[];\r\n    private personenRenderer: ArrayToElementRenderer<Person, HTMLElement, string>;\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.personenRenderer = new ArrayToElementRenderer(this,\r\n            (b: Person) => b.id,\r\n            b => new BalanceAnzeigeElement());\r\n    }\r\n\r\n    connectedCallback() {\r\n\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n    setBalance(personen: Person[]) {\r\n        this.personen = personen;\r\n        this.balanceRange = Math.max(...Object.values(personen).map(v => Math.abs(v.balance)));\r\n        this.updatesStyle();\r\n    }\r\n\r\n    private updatesStyle() {\r\n        this.personenRenderer.update(this.personen,\r\n            (e, b) => {\r\n                e.setAttribute(PersonNameAttribute, b.name);\r\n                e.setAttribute(BalanceAttribute, \"\" + b.balance);\r\n                e.setAttribute(BalanceRangeAttribute, \"\" + this.balanceRange);\r\n            });\r\n    }\r\n\r\n}\r\nexport const BalanceAnzeigeTagName = \"balance-anzeige\";\r\ncustomElements.define(BalanceAnzeigeTagName, BalanceAnzeige);\r\n","import template from \"./BezahlungCard.html\";\r\nimport \"./BezahlungCard.scss\";\r\nimport { formatCurrency } from \"../../utils/formatCurrency\";\r\n\r\nexport const BeschreibungAttribute = \"beschreibung\";\r\nexport const WertAttribute = \"wert\";\r\nexport const BezahlendePersonAttribute = \"bezahlende-person\";\r\nexport const EmpfaengerAttribute = \"empfaenger\";\r\n\r\ninterface AttributeStore {\r\n    bezahlendePerson: string;\r\n    beschreibung: string;\r\n    wert: number;\r\n    empfaenger: string;\r\n}\r\n\r\nexport class BezahlungCard extends HTMLElement {\r\n    private attributeStore: AttributeStore;\r\n    private wertElement: HTMLSpanElement;\r\n    private empfaengerElement: HTMLSpanElement;\r\n    private bezahlendePersonElement: HTMLSpanElement;\r\n    private beschreibungElement: HTMLDivElement;\r\n\r\n    constructor() {\r\n        super();\r\n        this.attributeStore = {\r\n            beschreibung: null,\r\n            bezahlendePerson: null,\r\n            empfaenger: null,\r\n            wert: null\r\n        };\r\n        this.innerHTML = template;\r\n        this.beschreibungElement = this.querySelector(`[data-ref=\"beschreibung\"]`);\r\n        this.bezahlendePersonElement = this.querySelector(`[data-ref=\"bezahlende-person\"]`);\r\n        this.empfaengerElement = this.querySelector(`[data-ref=\"empfaenger\"]`);\r\n        this.wertElement = this.querySelector(`[data-ref=\"wert\"]`);\r\n    }\r\n\r\n    connectedCallback() {\r\n\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n    attributeChangedCallback() {\r\n        this.updateAttributes();\r\n    }\r\n\r\n    private checkChanged<K extends keyof AttributeStore>(prop: K, getAtt: () => AttributeStore[K]) {\r\n        let att = getAtt();\r\n        if (this.attributeStore[prop] != att) {\r\n            this.attributeStore[prop] = att;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private updateAttributes() {\r\n        let changed = [\r\n            this.checkChanged(\"bezahlendePerson\", () => this.getAttribute(BezahlendePersonAttribute)),\r\n            this.checkChanged(\"beschreibung\", () => this.getAttribute(BeschreibungAttribute)),\r\n            this.checkChanged(\"wert\", () => parseFloat(this.getAttribute(WertAttribute))),\r\n            this.checkChanged(\"empfaenger\", () => this.getAttribute(EmpfaengerAttribute))\r\n        ].some(v => v);\r\n        if (changed) {\r\n            this.updatesStyle();\r\n        }\r\n    }\r\n\r\n    static get observedAttributes() {\r\n        return [BeschreibungAttribute, BezahlendePersonAttribute, WertAttribute, EmpfaengerAttribute];\r\n    }\r\n\r\n    private updatesStyle() {\r\n        this.beschreibungElement.innerText = this.attributeStore.beschreibung;\r\n        this.bezahlendePersonElement.innerText = this.attributeStore.bezahlendePerson;\r\n        this.wertElement.innerText = formatCurrency(this.attributeStore.wert);\r\n        this.empfaengerElement.innerText = this.attributeStore.empfaenger;\r\n    }\r\n\r\n}\r\nexport const BezahlungCardTagName = \"bezahlung-card\";\r\ncustomElements.define(BezahlungCardTagName, BezahlungCard);\r\n","export default function toInteger(dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN;\n  }\n\n  var number = Number(dirtyNumber);\n\n  if (isNaN(number)) {\n    return number;\n  }\n\n  return number < 0 ? Math.ceil(number) : Math.floor(number);\n}","export default function requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}","import requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\n\nexport default function toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument); // Clone the date\n\n  if (argument instanceof Date || typeof argument === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule\"); // eslint-disable-next-line no-console\n\n      console.warn(new Error().stack);\n    }\n\n    return new Date(NaN);\n  }\n}","import toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @returns {Date} the start of a day\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * var result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\n\nexport default function startOfDay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}","import toDate from '../toDate/index.js';\nimport toInteger from '../_lib/toInteger/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @param {Object} [options] - an object with options.\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @returns {Date} the start of a week\n * @throws {TypeError} 1 argument required\n * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * var result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * var result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\n\nexport default function startOfWeek(dirtyDate, dirtyOptions) {\n  requiredArgs(1, arguments);\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;\n  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);\n  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');\n  }\n\n  var date = toDate(dirtyDate);\n  var day = date.getDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  date.setDate(date.getDate() - diff);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}","export function groupBy<T, K extends keyof T>(list: T[], key: K) {\r\n    const map = new Map<T[K], T[]>();\r\n    list.forEach((item) => {\r\n        const k = item[key];\r\n        const collection = map.get(k);\r\n        if (!collection) {\r\n            map.set(k, [item]);\r\n        } else {\r\n            collection.push(item);\r\n        }\r\n    });\r\n    return map;\r\n}\r\n","import template from \"./BezahlungenGroup.html\";\r\nimport \"../BezahlungCard/BezahlungCard\";\r\nimport { BezahlungViewModel } from \"./BezahlungViewModel\";\r\nimport { ArrayToElementRenderer } from \"../../utils/ArrayToElementRenderer\";\r\nimport { BeschreibungAttribute, BezahlendePersonAttribute, BezahlungCard, EmpfaengerAttribute, WertAttribute } from \"../BezahlungCard/BezahlungCard\";\r\n\r\nexport class BezahlungenGroup extends HTMLElement {\r\n    private container: HTMLDivElement;\r\n    private titleElement: HTMLHeadingElement;\r\n    private bezahlungenRenderer: ArrayToElementRenderer<BezahlungViewModel, BezahlungCard, string>;\r\n\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.container = this.querySelector(`[data-ref=\"container\"]`);\r\n        this.titleElement = this.querySelector(`[data-ref=\"title\"]`);\r\n        this.bezahlungenRenderer = new ArrayToElementRenderer(this.container,\r\n            (b: BezahlungViewModel) => b.id,\r\n            b => new BezahlungCard());\r\n    }\r\n\r\n    connectedCallback() {\r\n\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n\r\n    setBezahlungen(bezahlungen: BezahlungViewModel[]) {\r\n        this.bezahlungenRenderer.update(bezahlungen, (e, b) => {\r\n            e.setAttribute(BeschreibungAttribute, b.beschreibung);\r\n            e.setAttribute(WertAttribute, \"\" + b.wert);\r\n            e.setAttribute(BezahlendePersonAttribute, b.bezahlendePersonName);\r\n            e.setAttribute(EmpfaengerAttribute, b.empfaenger);\r\n        });\r\n    }\r\n\r\n    set title(t: string) {\r\n        this.titleElement.innerText = t;\r\n    }\r\n\r\n}\r\nexport const BezahlungenGroupTagName = \"bezahlungen-group\";\r\ncustomElements.define(BezahlungenGroupTagName, BezahlungenGroup);\r\n","import template from \"./BezahlungenView.html\";\r\nimport \"./BezahlungenView.scss\";\r\nimport \"../BezahlungCard/BezahlungCard\";\r\nimport { Bezahlung, Person } from \"../../state/State\";\r\nimport { addDays, startOfToday, startOfDay, startOfWeek, endOfWeek } from \"date-fns\";\r\nimport { groupBy } from \"../../utils/groupBy\";\r\nimport \"./BezahlungenGroup\";\r\nimport { BezahlungViewModel } from \"./BezahlungViewModel\";\r\nimport { ArrayToElementRenderer } from \"../../utils/ArrayToElementRenderer\";\r\nimport { BezahlungenGroup } from \"./BezahlungenGroup\";\r\n\r\nexport class BezahlungenView extends HTMLElement {\r\n    private minEintraege: number;\r\n    private minTage: number;\r\n    private all: boolean;\r\n    private bezahlungen: Bezahlung[];\r\n    private personen: Person[];\r\n    private bezahlungenContainer: HTMLDivElement;\r\n    private showMoreButton: HTMLButtonElement;\r\n    private groupRenderer: ArrayToElementRenderer<[number, BezahlungViewModel[]], BezahlungenGroup, string>;\r\n\r\n    constructor() {\r\n        super();\r\n        this.minTage = 3;\r\n        this.minEintraege = 20;\r\n        this.all = false;\r\n        this.innerHTML = template;\r\n        this.bezahlungenContainer = this.querySelector(\"#bezahlungen-container\");\r\n        this.showMoreButton = this.querySelector(\"#show-more\");\r\n        this.showMoreClick = this.showMoreClick.bind(this);\r\n        this.groupRenderer = new ArrayToElementRenderer(this.bezahlungenContainer,\r\n            (s: [number, BezahlungViewModel[]]) => \"\" + s[0], () => new BezahlungenGroup());\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.showMoreButton.addEventListener(\"click\", this.showMoreClick);\r\n    }\r\n\r\n    disconnectedCallback() {\r\n\r\n    }\r\n\r\n    private setShowMoreButtonDisplay() {\r\n        if (this.bezahlungen) {\r\n            this.showMoreButton.style.display = this.bezahlungen.length > this.anzahlEintraege ? \"inline\" : \"none\";\r\n        }\r\n    }\r\n\r\n    showMoreClick() {\r\n        let last: BezahlungenGroup = <BezahlungenGroup>this.bezahlungenContainer.lastElementChild;\r\n        this.anzahlEintraege += 20;\r\n        if (last) {\r\n            last.scrollIntoView();\r\n        }\r\n        this.setShowMoreButtonDisplay();\r\n    }\r\n\r\n    private formatEmpfaenger(z: Bezahlung, personen: Person[]) {\r\n        if (z.empfaengerIds.length == personen.length) {\r\n            return \"alle\";\r\n        }\r\n        return z.empfaengerIds.map(id => personen.find(p => p.id == id).name).join(\", \");\r\n    }\r\n\r\n    setBezahlungen(bezahlungen: Bezahlung[], personen: Person[]) {\r\n        this.bezahlungen = bezahlungen;\r\n        this.personen = personen;\r\n        this.setShowMoreButtonDisplay();\r\n        this.render();\r\n    }\r\n\r\n    private render() {\r\n        let sorted = this.bezahlungen.sort((a, b) => +b.zeitpunkt - +a.zeitpunkt);\r\n\r\n        let filtered = sorted;\r\n        if (!this.all) {\r\n            filtered = sorted.filter(z => z.zeitpunkt > addDays(startOfToday(), -this.minTage));\r\n            if (filtered.length < this.minEintraege) {\r\n                filtered = sorted.slice(0, this.minEintraege)\r\n            }\r\n        }\r\n\r\n        let mapped = filtered.map(z => {\r\n            let x: BezahlungViewModel = {\r\n                bezahlendePersonName: this.personen.find(p => p.id == z.bezahlendePersonId).name,\r\n                wert: z.wert,\r\n                beschreibung: z.beschreibung,\r\n                empfaenger: this.formatEmpfaenger(z, this.personen),\r\n                tag: +startOfDay(z.zeitpunkt),\r\n                id: z.id,\r\n                woche: +startOfWeek(z.zeitpunkt)\r\n            };\r\n            return x;\r\n        });\r\n\r\n        let isWeek = false;\r\n        let grouped = Array.of(...groupBy(mapped, \"tag\").entries());\r\n        let avgGroupSize = grouped.reduce((p, c) => p + c[1].length, 0) / grouped.length;\r\n        if (avgGroupSize < 3) {\r\n            grouped = Array.of(...groupBy(mapped, \"woche\").entries());\r\n            isWeek = true;\r\n        }\r\n        let sortedGroups = grouped.sort((a, b) => b[0] - a[0]);\r\n        this.groupRenderer.update(sortedGroups,\r\n            (e, d) => {\r\n                e.setBezahlungen(d[1]);\r\n                if (isWeek) {\r\n                    e.title = this.formatWeek(new Date(d[0]));\r\n                }\r\n                else {\r\n\r\n                    e.title = this.formatDay(new Date(d[0]));\r\n                }\r\n            });\r\n\r\n    }\r\n\r\n    get anzahlEintraege() {\r\n        return this.minEintraege;\r\n    }\r\n\r\n    set anzahlEintraege(val: number) {\r\n        this.minEintraege = val;\r\n        this.render();\r\n    }\r\n\r\n\r\n    private formatWeek(date: Date) {\r\n        let endWeek = endOfWeek(date);\r\n        let weekformat: string;\r\n        const dayAndMonth = (d:Date) => new Intl.DateTimeFormat([\"de-AT\"], { day: \"numeric\", month: \"long\" }).format(d);\r\n        if (endWeek.getMonth() == date.getMonth()) {\r\n            weekformat = `${new Intl.DateTimeFormat([\"de-AT\"], { day: \"numeric\" }).format(date)}. - ${dayAndMonth(endWeek)}`;\r\n        }\r\n        else {\r\n            weekformat = `${dayAndMonth(date)} - ${dayAndMonth(endWeek)}`;\r\n        }\r\n        return weekformat;\r\n    }\r\n\r\n    private formatDay(date: Date) {\r\n        return new Intl.DateTimeFormat([\"de-AT\"], { weekday: \"short\", year: \"numeric\", month: \"2-digit\", day: \"2-digit\" }).format(date);\r\n    }\r\n}\r\nexport const BezahlungenViewTagName = \"bezahlungen-view\";\r\ncustomElements.define(BezahlungenViewTagName, BezahlungenView);\r\n","import toInteger from '../_lib/toInteger/index.js';\nimport toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of days to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the days added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * var result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\n\nexport default function addDays(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var amount = toInteger(dirtyAmount);\n\n  if (isNaN(amount)) {\n    return new Date(NaN);\n  }\n\n  if (!amount) {\n    // If 0 days, no-op to avoid changing times in the hour before end of DST\n    return date;\n  }\n\n  date.setDate(date.getDate() + amount);\n  return date;\n}","import startOfDay from '../startOfDay/index.js';\n/**\n * @name startOfToday\n * @category Day Helpers\n * @summary Return the start of today.\n * @pure false\n *\n * @description\n * Return the start of today.\n *\n * > ⚠️ Please note that this function is not present in the FP submodule as\n * > it uses `Date.now()` internally hence impure and can't be safely curried.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @returns {Date} the start of today\n *\n * @example\n * // If today is 6 October 2014:\n * var result = startOfToday()\n * //=> Mon Oct 6 2014 00:00:00\n */\n\nexport default function startOfToday() {\n  return startOfDay(Date.now());\n}","import toDate from '../toDate/index.js';\nimport toInteger from '../_lib/toInteger/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name endOfWeek\n * @category Week Helpers\n * @summary Return the end of a week for the given date.\n *\n * @description\n * Return the end of a week for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @param {Object} [options] - an object with options.\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @returns {Date} the end of a week\n * @throws {TypeError} 1 argument required\n * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6\n *\n * @example\n * // The end of a week for 2 September 2014 11:55:00:\n * var result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sat Sep 06 2014 23:59:59.999\n *\n * @example\n * // If the week starts on Monday, the end of the week for 2 September 2014 11:55:00:\n * var result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Sun Sep 07 2014 23:59:59.999\n */\n\nexport default function endOfWeek(dirtyDate, dirtyOptions) {\n  requiredArgs(1, arguments);\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;\n  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);\n  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');\n  }\n\n  var date = toDate(dirtyDate);\n  var day = date.getDay();\n  var diff = (day < weekStartsOn ? -7 : 0) + 6 - (day - weekStartsOn);\n  date.setDate(date.getDate() + diff);\n  date.setHours(23, 59, 59, 999);\n  return date;\n}","import template from \"./KontokorrentPage.html\";\r\nimport { Store } from \"../../state/Store\";\r\nimport { ServiceLocator } from \"../../ServiceLocator\";\r\nimport { RoutingActionCreator } from \"../../state/actions/RoutingActionCreator\";\r\nimport { KontokorrentState, State } from \"../../state/State\";\r\nimport { convertLinks } from \"../convertLinks\";\r\nimport { AccountActionCreator } from \"../../state/actions/AccountActionCreator\";\r\nimport { KontokorrentsActionCreator } from \"../../state/actions/KontokorrentsActionCreator\";\r\nimport { AppBar, AppBarTagName } from \"../AppBar/AppBar\";\r\nimport \"../BalanceAnzeige/BalanceAnzeigeElement\";\r\nimport { BalanceAnzeige } from \"../BalanceAnzeige/BalanceAnzeige\";\r\nimport \"../BalanceAnzeige/BalanceAnzeige\";\r\nimport \"../BezahlungenView/BezahlungenView\";\r\nimport { BezahlungenView } from \"../BezahlungenView/BezahlungenView\";\r\nimport \"./KontokorrentPage.scss\";\r\n\r\nexport class KontokorrentPage extends HTMLElement {\r\n    private store: Store;\r\n    private subscription: () => void;\r\n    private routingActionCreator: RoutingActionCreator;\r\n    private accountActionCreator: AccountActionCreator;\r\n    private kontokorrentsActionCreator: KontokorrentsActionCreator;\r\n    private appBar: AppBar;\r\n    private balanceAnzeige: BalanceAnzeige;\r\n    private bezahlungenView: BezahlungenView;\r\n    private kontokorrentSpinner: HTMLSpanElement;\r\n    private kontokorrent: KontokorrentState;\r\n\r\n    constructor() {\r\n        super();\r\n        this.innerHTML = template;\r\n        this.appBar = this.querySelector(AppBarTagName);\r\n        this.balanceAnzeige = this.querySelector(\"#balance-anzeige\");\r\n        this.bezahlungenView = this.querySelector(\"#bezahlungen-view\");\r\n        this.kontokorrentSpinner = this.querySelector(\"#spinner\");\r\n    }\r\n\r\n    addServices(serviceLocator: ServiceLocator) {\r\n        this.store = serviceLocator.store;\r\n        this.routingActionCreator = serviceLocator.routingActionCreator;\r\n        this.accountActionCreator = serviceLocator.accountActionCreator;\r\n        this.kontokorrentsActionCreator = serviceLocator.kontokorrentsActionCreator;\r\n        this.appBar.addServices(serviceLocator);\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.subscription = this.store.subscribe(null, state => this.applyStoreState(state));\r\n    }\r\n\r\n    private applyStoreState(state: State) {\r\n        this.kontokorrent = state.kontokorrents.kontokorrents[state.kontokorrents.activeKontokorrentId];\r\n        if (this.kontokorrent) {\r\n            document.title = `${this.kontokorrent.name} - Kontokorrent`;\r\n            if (this.kontokorrent.personen) {\r\n                this.balanceAnzeige.setBalance(this.kontokorrent.personen);\r\n                this.bezahlungenView.setBezahlungen(this.kontokorrent.bezahlungen, this.kontokorrent.personen);\r\n            }\r\n            this.kontokorrentSpinner.style.display = this.kontokorrent.synchronisieren ? \"flex\" : \"none\";\r\n        }\r\n    }\r\n\r\n    setKontokorrentId(id: string) {\r\n        this.kontokorrentsActionCreator.kontokorrentOeffnen(id);\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        this.subscription();\r\n    }\r\n}\r\n\r\ncustomElements.define('kontokorrent-page', KontokorrentPage);\r\n"],"sourceRoot":""}